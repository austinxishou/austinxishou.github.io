<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>爵士犀首</title>
  <subtitle>Stand out or get out!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://austinxishou.github.io/"/>
  <updated>2017-05-17T05:51:23.184Z</updated>
  <id>https://austinxishou.github.io/</id>
  
  <author>
    <name>AustinXishou</name>
    <email>austinxishou@yahoo.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>python多线程以及执行本地命令技术要点</title>
    <link href="https://austinxishou.github.io/python/cj2skkokv005618px7edtf12w/python/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BB%A5%E5%8F%8A%E6%89%A7%E8%A1%8C%E6%9C%AC%E5%9C%B0%E5%91%BD%E4%BB%A4%E6%8A%80%E6%9C%AF%E8%A6%81%E7%82%B9/"/>
    <id>https://austinxishou.github.io/python/cj2skkokv005618px7edtf12w/python/python多线程以及执行本地命令技术要点/</id>
    <published>2017-05-17T03:18:42.782Z</published>
    <updated>2017-05-17T05:51:23.184Z</updated>
    
    <content type="html"><![CDATA[<h2 id="subprocess-About-简介"><a href="#subprocess-About-简介" class="headerlink" title="subprocess-About-简介"></a>subprocess-About-简介</h2><p><code>subprocess</code> 模块用来创建新的进程，连接到其stdin、stdout、stderr管道并获取它们的返回码。</p>
<p>subprocess模块的出现是为了替代旧模块及函数：<code>os.system</code>、<code>os.spawn*</code>、<code>os.popen*</code>、<code>popen2.*</code>、<code>commands.*</code>。</p>
<p>强烈建议POSIX用户（Linux、BSD等）安装并使用较新的<code>subprocess32</code>模块，而不是Python 2.7自带的subprocess。</p>
<p>推荐用户使用<code>call</code>、<code>check_call</code>和<code>check_output</code>这三个快捷函数，在无法满足需求的时候才使用更高级的<code>Popen</code>接口。</p>
<h2 id="subprocess-call-调用"><a href="#subprocess-call-调用" class="headerlink" title="subprocess.call-调用"></a>subprocess.call-调用</h2><p>call函数可以认为是对<code>popen</code>和<code>wait</code>的分装，直接对<code>call</code>函数传入要执行的命令行，将命令行的退出code返回。</p>
<p>运行由<code>args</code>参数提供的命令，等待命令执行结束并返回返回码。args参数由字符串形式提供且有多个命令参数时，</p>
<p>需要提供<code>shell=True</code>参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">subprocess.call(args, *, stdin= <span class="keyword">None</span>, stdout = <span class="keyword">None</span>, stderr = <span class="keyword">None</span>, shell = <span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>注意不要为stdout和stderr参数赋值subprocess.PIPE，如果子进程输出量较多会造成死锁，这两个参数可以赋值为subprocess.STDOUT打印到屏幕或者赋值为一个文件对象将输出写入文件：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//test.py-示例</div><div class="line"><span class="keyword">import</span> subprocess <span class="keyword">as</span> sp</div><div class="line">sp.call(<span class="string">'python run.py'</span>, shell = <span class="keyword">True</span>, stdin=open(<span class="string">'fake_input'</span>, <span class="string">'r'</span>), stdout=open(<span class="string">'result'</span>, <span class="string">'w'</span>))</div></pre></td></tr></table></figure>
<h2 id="subprocess-check-call-调用返回确认"><a href="#subprocess-check-call-调用返回确认" class="headerlink" title="subprocess.check_call-调用返回确认"></a>subprocess.check_call-调用返回确认</h2><p>与call方法类似，不同在于如果命令行执行成功，<code>check_call</code>返回返回码0，否则抛出subprocess.CalledProcessError异常。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">subprocess.check_call(args, *, stdin = <span class="keyword">None</span>, stdout = <span class="keyword">None</span>, stderr = <span class="keyword">None</span>, shell = <span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<h2 id="subprocess-check-output-调用输出确认"><a href="#subprocess-check-output-调用输出确认" class="headerlink" title="subprocess.check_output-调用输出确认"></a>subprocess.check_output-调用输出确认</h2><p>在子进程执行命令，以字符串形式返回执行结果的输出。如果子进程退出码不是0，抛出subprocess.CalledProcessError异常，异常的output字段包含错误输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">subprocess.check_output(args, *, stdin = <span class="keyword">None</span>, stderr = <span class="keyword">None</span>, shell = <span class="keyword">False</span>, universal_newlines = <span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<h2 id="subprocess-Popen-管道调用"><a href="#subprocess-Popen-管道调用" class="headerlink" title="subprocess.Popen 管道调用"></a>subprocess.Popen 管道调用</h2><h3 id="开启新进程"><a href="#开启新进程" class="headerlink" title="开启新进程"></a>开启新进程</h3><p>Popen启动新的进程与父进程并行执行，默认父进程不等待新进程结束。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">TestPopen</span><span class="params">()</span>:</span></div><div class="line">  <span class="keyword">import</span> subprocess</div><div class="line">  p=subprocess.Popen(<span class="string">"dir"</span>,shell=<span class="keyword">True</span>)</div><div class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">250</span>) :</div><div class="line">    <span class="keyword">print</span> (<span class="string">"other things"</span>)</div></pre></td></tr></table></figure>
<h3 id="等待子进程结束"><a href="#等待子进程结束" class="headerlink" title="等待子进程结束"></a>等待子进程结束</h3><p><code>p.wait</code>函数使得父进程等待新创建的进程运行结束，然后再继续父进程的其他任务。且此时可以在<code>p.returncode</code>中得到新进程的返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">TestWait</span><span class="params">()</span>:</span></div><div class="line">  <span class="keyword">import</span> subprocess</div><div class="line">  <span class="keyword">import</span> datetime</div><div class="line">  <span class="keyword">print</span> (datetime.datetime.now())</div><div class="line">  p=subprocess.Popen(<span class="string">"sleep 10"</span>,shell=<span class="keyword">True</span>)</div><div class="line">  p.wait()</div><div class="line">  <span class="keyword">print</span> (p.returncode)</div><div class="line">  <span class="keyword">print</span> (datetime.datetime.now())</div></pre></td></tr></table></figure>
<h3 id="poll等待"><a href="#poll等待" class="headerlink" title="poll等待"></a>poll等待</h3><p><code>p.poll</code>函数可以用来检测新创建的进程是否结束。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">TestPoll</span><span class="params">()</span>:</span></div><div class="line">  <span class="keyword">import</span> subprocess</div><div class="line">  <span class="keyword">import</span> datetime</div><div class="line">  <span class="keyword">import</span> time</div><div class="line">  <span class="keyword">print</span> (datetime.datetime.now())</div><div class="line">  p=subprocess.Popen(<span class="string">"sleep 10"</span>,shell=<span class="keyword">True</span>)</div><div class="line">  t = <span class="number">1</span></div><div class="line">  <span class="keyword">while</span>(t &lt;= <span class="number">5</span>):</div><div class="line">    time.sleep(<span class="number">1</span>)</div><div class="line">    p.poll()</div><div class="line">    <span class="keyword">print</span> (p.returncode)</div><div class="line">    t+=<span class="number">1</span></div><div class="line">  <span class="keyword">print</span> (datetime.datetime.now())</div></pre></td></tr></table></figure>
<h3 id="结束进程"><a href="#结束进程" class="headerlink" title="结束进程"></a>结束进程</h3><p><code>p.kill</code>或<code>p.terminate</code>用来结束创建的新进程，在windows系统上相当于调用<code>TerminateProcess()</code>，在posix系统上相当于发送信号SIGTERM和SIGKILL。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">TestKillAndTerminate</span><span class="params">()</span>:</span></div><div class="line">    p=subprocess.Popen(<span class="string">"notepad.exe"</span>)</div><div class="line">    t = <span class="number">1</span></div><div class="line">    <span class="keyword">while</span>(t &lt;= <span class="number">5</span>):</div><div class="line">      time.sleep(<span class="number">1</span>)</div><div class="line">      t +=<span class="number">1</span></div><div class="line">    p.kill()</div><div class="line">    <span class="comment">#p.terminate()</span></div><div class="line">    <span class="keyword">print</span> (<span class="string">"new process was killed"</span>)</div></pre></td></tr></table></figure>
<h3 id="与子进程交互"><a href="#与子进程交互" class="headerlink" title="与子进程交互"></a>与子进程交互</h3><p><code>p.communicate</code>可以与新进程交互，但是必须要在popen构造时候将管道重定向。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">TestCommunicate</span><span class="params">()</span>:</span></div><div class="line">  <span class="keyword">import</span> subprocess</div><div class="line">  cmd = <span class="string">"dir"</span></div><div class="line">  p=subprocess.Popen(cmd, shell=<span class="keyword">True</span>, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)</div><div class="line">  (stdoutdata, stderrdata) = p.communicate()</div><div class="line">  </div><div class="line">  <span class="keyword">if</span> p.returncode != <span class="number">0</span>:</div><div class="line">        <span class="keyword">print</span> (cmd + <span class="string">"error !"</span>)</div><div class="line">  <span class="comment">#defaultly the return stdoutdata is bytes, need convert to str and utf8</span></div><div class="line">  <span class="keyword">for</span> r <span class="keyword">in</span> str(stdoutdata,encoding=<span class="string">'utf8'</span> ).split(<span class="string">"\n"</span>):</div><div class="line">    <span class="keyword">print</span> (r)</div><div class="line">  <span class="keyword">print</span> (p.returncode)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">TestCommunicate2</span><span class="params">()</span>:</span></div><div class="line">  <span class="keyword">import</span> subprocess</div><div class="line">  cmd = <span class="string">"dir"</span></div><div class="line">  <span class="comment">#universal_newlines=True, it means by text way to open stdout and stderr</span></div><div class="line">  p = subprocess.Popen(cmd, shell=<span class="keyword">True</span>, universal_newlines=<span class="keyword">True</span>, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)</div><div class="line">  curline = p.stdout.readline()</div><div class="line">  <span class="keyword">while</span>(curline != <span class="string">""</span>):</div><div class="line">        <span class="keyword">print</span> (curline)</div><div class="line">        curline = p.stdout.readline()</div><div class="line">  p.wait()</div><div class="line">  <span class="keyword">print</span> (p.returncode)</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      python多线程以及执行本地命令技术要点  Run Shell Commands in Python
    
    </summary>
    
      <category term="python" scheme="https://austinxishou.github.io/categories/python/"/>
    
    
      <category term="python" scheme="https://austinxishou.github.io/tags/python/"/>
    
      <category term="scrapy" scheme="https://austinxishou.github.io/tags/scrapy/"/>
    
  </entry>
  
  <entry>
    <title>python结巴分词jieba技术集成应用说明</title>
    <link href="https://austinxishou.github.io/python/cj2skkoky005c18px5l8wy5fn/python/python%E7%BB%93%E5%B7%B4%E5%88%86%E8%AF%8Djieba%E6%8A%80%E6%9C%AF%E9%9B%86%E6%88%90%E5%BA%94%E7%94%A8%E8%AF%B4%E6%98%8E/"/>
    <id>https://austinxishou.github.io/python/cj2skkoky005c18px5l8wy5fn/python/python结巴分词jieba技术集成应用说明/</id>
    <published>2017-05-17T01:43:11.910Z</published>
    <updated>2017-05-17T02:03:35.877Z</updated>
    
    <content type="html"><![CDATA[<h2 id="About-简介说明"><a href="#About-简介说明" class="headerlink" title="About-简介说明"></a>About-简介说明</h2><p><a href="https://github.com/fxsjy/jieba/" target="_blank" rel="external">jieba-Github</a></p>
<p>结巴支持三种分词模式:</p>
<ol>
<li>精确模式，试图将句子最精确地切开，适合文本分析； </li>
<li>全模式，把句子中所有的可以成词的词语都扫描出来, 速度非常快，但是不能解决歧义； </li>
<li>搜索引擎模式，在精确模式的基础上，对长词再次切分，提高召回率，适合用于搜索引擎分词。</li>
</ol>
<p>结巴支持繁体分词</p>
<p>结巴支持自定义词典</p>
<p><strong>算法实现简析</strong></p>
<blockquote>
<p>基于Trie树结构实现高效的词图扫描，生成句子中汉字所有可能成词情况所构成的有向无环图（DAG)<br>采用了动态规划查找最大概率路径, 找出基于词频的最大切分组合<br>对于未登录词，采用了基于汉字成词能力的HMM模型，使用了Viterbi算法</p>
</blockquote>
<h2 id="Install-安装"><a href="#Install-安装" class="headerlink" title="Install-安装"></a>Install-安装</h2><p><strong> Python 2.x 下的安装 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install jieba</div></pre></td></tr></table></figure>
<p>或者进行下载后自行引入;</p>
<p><strong> Python 3.x 下的安装 </strong></p>
<blockquote>
<p>  目前master分支是只支持Python2.x 的<br>  Python3.x 版本的分支也已经基本可用： <a href="https://github.com/fxsjy/jieba/tree/jieba3k" target="_blank" rel="external">https://github.com/fxsjy/jieba/tree/jieba3k</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/fxsjy/jieba.git  </div><div class="line">git checkout jieba3k  </div><div class="line">python setup.py install</div></pre></td></tr></table></figure>
<h2 id="Usage-应用"><a href="#Usage-应用" class="headerlink" title="Usage-应用"></a>Usage-应用</h2><h3 id="分词"><a href="#分词" class="headerlink" title="分词"></a>分词</h3><p><strong>函数: jieba.cut</strong></p>
<blockquote>
<p>jieba.cut方法接受两个输入参数: </p>
<pre><code>+ 1) 第一个参数为需要分词的字符串 
+ 2）cut_all参数用来控制是否采用全模式
</code></pre><p>jieba.cut_for_search方法接受一个参数：</p>
<pre><code>+ 需要分词的字符串,该方法适合用于搜索引擎构建倒排索引的分词，粒度比较细 
</code></pre><p>注意：待分词的字符串可以是gbk字符串、utf-8字符串或者unicode </p>
<p> jieba.cut以及jieba.cut_for_search返回的结构都是一个可迭代的generator，可以使用for循环来获得分词后得到的每一个词语(unicode)，也可以用list(jieba.cut(…))转化为list</p>
</blockquote>
<p><strong> 代码示例 </strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#encoding=utf-8  </span></div><div class="line"><span class="keyword">import</span> jieba  </div><div class="line">seg_list = jieba.cut(<span class="string">"我来到北京清华大学"</span>, cut_all=<span class="keyword">True</span>)  </div><div class="line"><span class="keyword">print</span> <span class="string">"Full Mode:"</span>, <span class="string">"/ "</span>.join(seg_list)  <span class="comment"># 全模式  </span></div><div class="line">seg_list = jieba.cut(<span class="string">"我来到北京清华大学"</span>, cut_all=<span class="keyword">False</span>)  </div><div class="line"><span class="keyword">print</span> <span class="string">"Default Mode:"</span>, <span class="string">"/ "</span>.join(seg_list)  <span class="comment"># 精确模式  </span></div><div class="line">seg_list = jieba.cut(<span class="string">"他来到了网易杭研大厦"</span>)  <span class="comment"># 默认是精确模式  </span></div><div class="line"><span class="keyword">print</span> <span class="string">", "</span>.join(seg_list)  </div><div class="line">seg_list = jieba.cut_for_search(<span class="string">"小明硕士毕业于中国科学院计算所，后在日本京都大学深造"</span>)  <span class="comment"># 搜索引擎模式  </span></div><div class="line"><span class="keyword">print</span> <span class="string">", "</span>.join(seg_list)</div></pre></td></tr></table></figure></p>
<p>输出为:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Output: </div><div class="line">【全模式】: 我/ 来到/ 北京/ 清华/ 清华大学/ 华大/ 大学 </div><div class="line">【精确模式】: 我/ 来到/ 北京/ 清华大学 </div><div class="line">【新词识别】：他, 来到, 了, 网易, 杭研, 大厦    (此处，“杭研”并没有在词典中，但是也被Viterbi算法识别出来了) </div><div class="line">【搜索引擎模式】： 小明, 硕士, 毕业, 于, 中国, 科学, 学院, 科学院, 中国科学院, 计算, 计算所, 后, 在, 日本, 京都, 大学, 日本京都大学, 深造</div></pre></td></tr></table></figure></p>
<h3 id="添加自定义词典"><a href="#添加自定义词典" class="headerlink" title="添加自定义词典"></a>添加自定义词典</h3><blockquote>
<p>开发者可以指定自己自定义的词典，以便包含jieba词库里没有的词。虽然jieba有新词识别能力，但是自行添加新词可以保证更高的正确率 </p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jieba.load_userdict(file_name) <span class="comment"># file_name为自定义词典的路径</span></div></pre></td></tr></table></figure>
<blockquote>
<p>词典格式和dict.txt一样，一个词占一行；每一行分三部分，一部分为词语，另一部分为词频，最后为词性（可省略），用空格隔开<br>范例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">自定义词典：</div><div class="line">云计算 5  </div><div class="line">李小福 2 nr  </div><div class="line">创新办 3 i  </div><div class="line">easy_install 3 eng  </div><div class="line">好用 300  </div><div class="line">韩玉赏鉴 3 nz</div></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">#encoding=utf-8  </span></div><div class="line"><span class="keyword">import</span> sys  </div><div class="line">sys.path.append(<span class="string">"../"</span>)  </div><div class="line"><span class="keyword">import</span> jieba  </div><div class="line">jieba.load_userdict(<span class="string">"userdict.txt"</span>)  </div><div class="line"><span class="keyword">import</span> jieba.posseg <span class="keyword">as</span> pseg  </div><div class="line">  </div><div class="line">test_sent = <span class="string">"李小福是创新办主任也是云计算方面的专家;"</span>  </div><div class="line">test_sent += <span class="string">"例如我输入一个带“韩玉赏鉴”的标题，在自定义词库中也增加了此词为N类型"</span>  </div><div class="line">words = jieba.cut(test_sent)  </div><div class="line"><span class="keyword">for</span> w <span class="keyword">in</span> words:  </div><div class="line"><span class="keyword">print</span> w  </div><div class="line">  </div><div class="line">result = pseg.cut(test_sent)  </div><div class="line">  </div><div class="line"><span class="keyword">for</span> w <span class="keyword">in</span> result:  </div><div class="line"><span class="keyword">print</span> w.word, <span class="string">"/"</span>, w.flag, <span class="string">", "</span>,  </div><div class="line">  </div><div class="line"><span class="keyword">print</span> <span class="string">"\n========"</span>  </div><div class="line">  </div><div class="line">terms = jieba.cut(<span class="string">'easy_install is great'</span>)  </div><div class="line"><span class="keyword">for</span> t <span class="keyword">in</span> terms:  </div><div class="line">    <span class="keyword">print</span> t  </div><div class="line"><span class="keyword">print</span> <span class="string">'-------------------------'</span>  </div><div class="line">terms = jieba.cut(<span class="string">'python 的正则表达式是好用的'</span>)  </div><div class="line"><span class="keyword">for</span> t <span class="keyword">in</span> terms:  </div><div class="line">    <span class="keyword">print</span> t</div></pre></td></tr></table></figure>
<blockquote>
<p>之前： 李小福 / 是 / 创新 / 办 / 主任 / 也 / 是 / 云 / 计算 / 方面 / 的 / 专家 / 加载自定义词库后： 李小福 / 是 / 创新办 / 主任 / 也 / 是 / 云计算 / 方面 / 的 / 专家 /<br>“通过用户自定义词典来增强歧义纠错能力” </p>
</blockquote>
<h3 id="关键词提取"><a href="#关键词提取" class="headerlink" title="关键词提取"></a>关键词提取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jieba.analyse.extract_tags(sentence,topK) <span class="comment">#需要先import jieba.analyse</span></div></pre></td></tr></table></figure>
<blockquote>
<p>说明<br>    setence为待提取的文本<br>    topK为返回几个TF/IDF权重最大的关键词，默认值为20 </p>
</blockquote>
<p><strong> 代码示例 （关键词提取） </strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys  </div><div class="line">sys.path.append(<span class="string">'../'</span>)  </div><div class="line">  </div><div class="line"><span class="keyword">import</span> jieba  </div><div class="line"><span class="keyword">import</span> jieba.analyse  </div><div class="line"><span class="keyword">from</span> optparse <span class="keyword">import</span> OptionParser  </div><div class="line">  </div><div class="line">USAGE = <span class="string">"usage: python extract_tags.py [file name] -k [top k]"</span>  </div><div class="line">  </div><div class="line">parser = OptionParser(USAGE)  </div><div class="line">parser.add_option(<span class="string">"-k"</span>, dest=<span class="string">"topK"</span>)  </div><div class="line">opt, args = parser.parse_args()  </div><div class="line">  </div><div class="line">‘’‘  </div><div class="line"><span class="keyword">if</span> len(args) &lt; <span class="number">1</span>:  </div><div class="line">    <span class="keyword">print</span> USAGE  </div><div class="line">    sys.exit(<span class="number">1</span>)  </div><div class="line">  </div><div class="line">file_name = args[<span class="number">0</span>]  </div><div class="line">’‘’  </div><div class="line">file_name=<span class="string">u"D:XXX/xx/xx.txt"</span>  </div><div class="line"><span class="keyword">if</span> opt.topK <span class="keyword">is</span> <span class="keyword">None</span>:  </div><div class="line">    topK = <span class="number">10</span>  </div><div class="line"><span class="keyword">else</span>:  </div><div class="line">    topK = int(opt.topK)  </div><div class="line">  </div><div class="line">content = open(file_name, <span class="string">'rb'</span>).read()  </div><div class="line">  </div><div class="line">tags = jieba.analyse.extract_tags(content, topK=topK)  </div><div class="line">  </div><div class="line"><span class="keyword">print</span> <span class="string">","</span>.join(tags)</div></pre></td></tr></table></figure></p>
<h3 id="词性标注"><a href="#词性标注" class="headerlink" title="词性标注"></a>词性标注</h3><blockquote>
<p>标注句子分词后每个词的词性，采用和ictclas兼容的标记法 </p>
</blockquote>
<p><strong> 用法示例 </strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> jieba.posseg <span class="keyword">as</span> pseg  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>words = pseg.cut(<span class="string">"我爱北京天安门"</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> w <span class="keyword">in</span> words:  </div><div class="line"><span class="meta">... </span>   <span class="keyword">print</span> w.word, w.flag  </div><div class="line"><span class="meta">... </span> </div><div class="line">我 r  </div><div class="line">爱 v  </div><div class="line">北京 ns  </div><div class="line">天安门 ns</div></pre></td></tr></table></figure></p>
<h3 id="并行分词"><a href="#并行分词" class="headerlink" title="并行分词"></a>并行分词</h3><blockquote>
<p>原理：将目标文本按行分隔后，把各行文本分配到多个python进程并行分词，然后归并结果，从而获得分词速度的可观提升基于python自带的multiprocessing模块，目前暂不支持windows </p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">jieba.enable_parallel(<span class="number">4</span>) <span class="comment"># 开启并行分词模式，参数为并行进程数  </span></div><div class="line">jieba.disable_parallel() <span class="comment"># 关闭并行分词模式</span></div></pre></td></tr></table></figure>
<p><strong> 用法示例 </strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> urllib2  </div><div class="line"><span class="keyword">import</span> sys,time  </div><div class="line"><span class="keyword">import</span> sys  </div><div class="line">sys.path.append(<span class="string">"../../"</span>)  </div><div class="line"><span class="keyword">import</span> jieba  </div><div class="line">jieba.enable_parallel(<span class="number">4</span>)  </div><div class="line">  </div><div class="line">url = sys.argv[<span class="number">1</span>]  </div><div class="line">content = open(url,<span class="string">"rb"</span>).read()  </div><div class="line">t1 = time.time()  </div><div class="line">words = list(jieba.cut(content))  </div><div class="line">  </div><div class="line">t2 = time.time()  </div><div class="line">tm_cost = t2-t1  </div><div class="line">  </div><div class="line">log_f = open(<span class="string">"1.log"</span>,<span class="string">"wb"</span>)  </div><div class="line"><span class="keyword">for</span> w <span class="keyword">in</span> words:  </div><div class="line"><span class="keyword">print</span> &gt;&gt; log_f, w.encode(<span class="string">"utf-8"</span>), <span class="string">"/"</span> ,  </div><div class="line">  </div><div class="line"><span class="keyword">print</span> <span class="string">'speed'</span> , len(content)/tm_cost, <span class="string">" bytes/second"</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>实验结果：在4核3.4GHz Linux机器上，对金庸全集进行精确分词，获得了1MB/s的速度，是单进程版的3.3倍。<br>其他词典</p>
<p>占用内存较小的词典文件 <a href="https://github.com/fxsjy/jieba/raw/master/extra_dict/dict.txt.small" target="_blank" rel="external">https://github.com/fxsjy/jieba/raw/master/extra_dict/dict.txt.small</a><br>    支持繁体分词更好的词典文件 <a href="https://github.com/fxsjy/jieba/raw/master/extra_dict/dict.txt.big" target="_blank" rel="external">https://github.com/fxsjy/jieba/raw/master/extra_dict/dict.txt.big</a> 下载你所需要的词典，然后覆盖jieba/dict.txt 即可或者用jieba.set_dictionary(‘data/dict.txt.big’)</p>
<p>模块初始化机制的改变:lazy load （从0.28版本开始）<br>jieba采用延迟加载，”import jieba”不会立即触发词典的加载，一旦有必要才开始加载词典构建trie。如果你想手工初始jieba，也可以手动初始化。</p>
</blockquote>
<h3 id="Tokenize：返回词语在原文的起始位置"><a href="#Tokenize：返回词语在原文的起始位置" class="headerlink" title="Tokenize：返回词语在原文的起始位置"></a>Tokenize：返回词语在原文的起始位置</h3><blockquote>
<p>注意，输入参数只接受unicode</p>
</blockquote>
<h3 id="ChineseAnalyzer-for-Whoosh搜索引擎"><a href="#ChineseAnalyzer-for-Whoosh搜索引擎" class="headerlink" title="ChineseAnalyzer for Whoosh搜索引擎"></a>ChineseAnalyzer for Whoosh搜索引擎</h3><blockquote>
<p>引用： from jieba.analyse import ChineseAnalyzer<br>用法示例：<a href="https://github.com/fxsjy/jieba/blob/master/test/test_whoosh.py" target="_blank" rel="external">https://github.com/fxsjy/jieba/blob/master/test/test_whoosh.py</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      python 分词 jieba
    
    </summary>
    
      <category term="python" scheme="https://austinxishou.github.io/categories/python/"/>
    
    
      <category term="python" scheme="https://austinxishou.github.io/tags/python/"/>
    
      <category term="jieba" scheme="https://austinxishou.github.io/tags/jieba/"/>
    
  </entry>
  
  <entry>
    <title>在线工具类网站</title>
    <link href="https://austinxishou.github.io/killtime/cj2skkoku005218pxarvdmo26/killtime/tools/"/>
    <id>https://austinxishou.github.io/killtime/cj2skkoku005218pxarvdmo26/killtime/tools/</id>
    <published>2017-05-12T02:16:41.523Z</published>
    <updated>2017-05-12T02:26:43.950Z</updated>
    
    <content type="html"><![CDATA[<h2 id="生活类"><a href="#生活类" class="headerlink" title="生活类"></a>生活类</h2><ul>
<li>在线听歌: <a href="http://lab.mkblog.cn/music/" target="_blank" rel="external">http://lab.mkblog.cn/music/</a></li>
</ul>
<h2 id="翻译平台"><a href="#翻译平台" class="headerlink" title="翻译平台"></a>翻译平台</h2><ul>
<li>Google翻译x: <a href="https://translate.google.com/" target="_blank" rel="external">https://translate.google.com/</a></li>
<li>有道: <a href="http://youdao.com/" target="_blank" rel="external">http://youdao.com/</a></li>
<li>扇贝英语 : <a href="https://www.shanbay.com/" target="_blank" rel="external">https://www.shanbay.com/</a></li>
<li>CNKI翻译助手：<a href="http://dict.cnki.net/" target="_blank" rel="external">http://dict.cnki.net/</a></li>
<li>句酷：<a href="http://www.jukuu.com/" target="_blank" rel="external">http://www.jukuu.com/</a></li>
<li>词都：<a href="http://www.dictall.com/" target="_blank" rel="external">http://www.dictall.com/</a></li>
<li>LINE Dictionary：<a href="http://ce.linedict.com/dict.html#/cnen/" target="_blank" rel="external">http://ce.linedict.com/dict.html#/cnen/</a></li>
<li>Glosbe：<a href="https://glosbe.com/" target="_blank" rel="external">https://glosbe.com/</a></li>
</ul>
<h2 id="程序工具箱"><a href="#程序工具箱" class="headerlink" title="程序工具箱"></a>程序工具箱</h2><ul>
<li>在线正则 : <a href="http://regexr.com/" target="_blank" rel="external">http://regexr.com/</a></li>
<li>编码转换 : <a href="http://tool.chinaz.com/Tools/Unicode.aspx" target="_blank" rel="external">http://tool.chinaz.com/Tools/Unicode.aspx</a></li>
<li>Json检验 : <a href="http://www.bejson.com/" target="_blank" rel="external">http://www.bejson.com/</a></li>
<li>Json检验 : <a href="http://pro.jsonlint.com/" target="_blank" rel="external">http://pro.jsonlint.com/</a></li>
<li>Json检验带错误行 : <a href="http://www.json.cn/" target="_blank" rel="external">http://www.json.cn/</a></li>
<li>ping工具 : <a href="http://ping.chinaz.com/" target="_blank" rel="external">http://ping.chinaz.com/</a></li>
<li>RGB颜色查询 : <a href="http://www.atool.org/colorpicker.php" target="_blank" rel="external">http://www.atool.org/colorpicker.php</a></li>
<li>字符串处理 : <a href="http://www.5ixuexiwang.com/str/compress.php" target="_blank" rel="external">http://www.5ixuexiwang.com/str/compress.php</a></li>
<li>在线运行代码 : <a href="http://www.shucunwang.com/RunCode/php/" target="_blank" rel="external">http://www.shucunwang.com/RunCode/php/</a></li>
<li>在线运行代码 : <a href="http://codepad.org/" target="_blank" rel="external">http://codepad.org/</a></li>
<li>在线Sql : <a href="http://sqlfiddle.com/#!4/c0be1c/1" target="_blank" rel="external">http://sqlfiddle.com/#!4/c0be1c/1</a></li>
<li>Ascii流程图 : <a href="http://asciiflow.com/" target="_blank" rel="external">http://asciiflow.com/</a></li>
<li>1024tools:<a href="https://1024tools.com/" target="_blank" rel="external">https://1024tools.com/</a></li>
<li>oschina:<a href="http://tool.oschina.net/" target="_blank" rel="external">http://tool.oschina.net/</a></li>
<li>shell练习:<a href="http://cb.vu/" target="_blank" rel="external">http://cb.vu/</a></li>
<li>rsa和pkcs8转换:<a href="https://www.chinassl.net/ssltools/convert-key.html" target="_blank" rel="external">https://www.chinassl.net/ssltools/convert-key.html</a></li>
<li>程序在线工具:<a href="http://tool.lu/" target="_blank" rel="external">http://tool.lu/</a></li>
<li>多线路速度测试:<a href="http://ping.chinaz.com/45.76.185.184" target="_blank" rel="external">http://ping.chinaz.com/45.76.185.184</a></li>
<li>github的star管理:<a href="http://gitconstellation.com/#/" target="_blank" rel="external">http://gitconstellation.com/#/</a></li>
<li>在线mock工具:<a href="http://apizza.cc" target="_blank" rel="external">http://apizza.cc</a></li>
<li>在线gitignore生成工具:<a href="https://www.gitignore.io/" target="_blank" rel="external">https://www.gitignore.io/</a></li>
</ul>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><ul>
<li>百度语音朗读:<a href="http://tts.baidu.com/text2audio?lan=zh&amp;ie=UTF-8&amp;text=%E4%BC%98%E9%85%B7%E5%BD%95%E5%B1%8F%E5%A4%A7%E5%B8%88" target="_blank" rel="external">http://tts.baidu.com/text2audio?lan=zh&amp;ie=UTF-8&amp;text=%E4%BC%98%E9%85%B7%E5%BD%95%E5%B1%8F%E5%A4%A7%E5%B8%88</a></li>
<li>模拟数据:<a href="https://apiary.io/" target="_blank" rel="external">https://apiary.io/</a></li>
<li><strong>在线api文档</strong>: <a href="http://devdocs.io/" target="_blank" rel="external">http://devdocs.io/</a></li>
</ul>
<h2 id="解密"><a href="#解密" class="headerlink" title="解密"></a>解密</h2><ul>
<li>php在线解密: <a href="http://dezend.qiling.org/" target="_blank" rel="external">http://dezend.qiling.org/</a></li>
<li>md5解密: <a href="http://cmd5.com/" target="_blank" rel="external">http://cmd5.com/</a></li>
<li>国家代码查询 : <a href="https://countrycode.org/" target="_blank" rel="external">https://countrycode.org/</a></li>
</ul>
<h2 id="在线编辑"><a href="#在线编辑" class="headerlink" title="在线编辑"></a>在线编辑</h2><ul>
<li>zybuluo : <a href="https://www.zybuluo.com/" target="_blank" rel="external">https://www.zybuluo.com/</a></li>
<li>markdown_table生成 : <a href="http://www.tablesgenerator.com/markdown_tables" target="_blank" rel="external">http://www.tablesgenerator.com/markdown_tables</a></li>
<li>processon协作:<a href="http://www.processon.com/" target="_blank" rel="external">http://www.processon.com/</a></li>
<li>石墨:<a href="https://shimo.im/" target="_blank" rel="external">https://shimo.im/</a></li>
<li>tower在线办公:<a href="https://tower.im/" target="_blank" rel="external">https://tower.im/</a></li>
<li>钉钉:<a href="https://www.dingtalk.com/" target="_blank" rel="external">https://www.dingtalk.com/</a></li>
<li>马克飞象:<a href="https://maxiang.io/" target="_blank" rel="external">https://maxiang.io/</a></li>
<li>在线时序图:<a href="https://www.websequencediagrams.com/" target="_blank" rel="external">https://www.websequencediagrams.com/</a></li>
<li>stackedit:<a href="https://stackedit.io/" target="_blank" rel="external">https://stackedit.io/</a></li>
</ul>
<h2 id="其他工具"><a href="#其他工具" class="headerlink" title="其他工具"></a>其他工具</h2><ul>
<li>video_to_gif: <a href="http://ezgif.com/video-to-gif" target="_blank" rel="external">http://ezgif.com/video-to-gif</a></li>
<li>markdwon转换: <a href="http://pandoc.org/try/" target="_blank" rel="external">http://pandoc.org/try/</a></li>
<li>在线测速: <a href="http://www.speedtest.net/" target="_blank" rel="external">http://www.speedtest.net/</a></li>
<li>在线签到: <a href="https://qiandao.today/" target="_blank" rel="external">https://qiandao.today/</a></li>
<li>微信对话生成: <a href="http://www.duihuashengchengqi.com/" target="_blank" rel="external">http://www.duihuashengchengqi.com/</a></li>
<li>飞机航班追踪：<a href="https://www.flightradar24.com/" target="_blank" rel="external">https://www.flightradar24.com/</a></li>
<li>清华大学镜像站:<a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="external">https://mirrors.tuna.tsinghua.edu.cn/</a></li>
<li>dll之家:<a href="http://www.dllzj.com/" target="_blank" rel="external">http://www.dllzj.com/</a></li>
<li>流量宝:<a href="http://www.liuliangbao.cn/" target="_blank" rel="external">http://www.liuliangbao.cn/</a></li>
<li>百度网盘永久直链外链:<a href="http://pan.plyz.net/" target="_blank" rel="external">http://pan.plyz.net/</a></li>
<li>艺匠独立作品:<a href="https://artizen.cc/" target="_blank" rel="external">https://artizen.cc/</a></li>
<li>dnsmasq:<a href="https://g2w.online/" target="_blank" rel="external">https://g2w.online/</a></li>
<li>tinypng:<a href="https://tinypng.com/" target="_blank" rel="external">https://tinypng.com/</a></li>
<li>方糖收微信消息:<a href="http://sc.ftqq.com/3.version" target="_blank" rel="external">http://sc.ftqq.com/3.version</a></li>
<li>随机生成美国身份: <a href="http://www.haoweichi.com/Index/random" target="_blank" rel="external">http://www.haoweichi.com/Index/random</a></li>
<li><ul>
<li>前端预处理器语言图形编译工具: <a href="http://koala-app.com/index-zh.html" target="_blank" rel="external">http://koala-app.com/index-zh.html</a></li>
</ul>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      在线工具类网站
    
    </summary>
    
      <category term="killtime" scheme="https://austinxishou.github.io/categories/killtime/"/>
    
    
      <category term="design" scheme="https://austinxishou.github.io/tags/design/"/>
    
  </entry>
  
  <entry>
    <title>软件及源码仓库收集</title>
    <link href="https://austinxishou.github.io/killtime/cj2skkokr004u18pxyyvrmk5z/killtime/soft_site/"/>
    <id>https://austinxishou.github.io/killtime/cj2skkokr004u18pxyyvrmk5z/killtime/soft_site/</id>
    <published>2017-05-12T02:16:41.522Z</published>
    <updated>2017-05-12T07:59:43.030Z</updated>
    
    <content type="html"><![CDATA[<h2 id="通用软件墙网站"><a href="#通用软件墙网站" class="headerlink" title="通用软件墙网站"></a>通用软件墙网站</h2><ul>
<li><a href="http://www.appinn.com/" target="_blank" rel="external">小众软件</a></li>
<li><a href="http://www.iplaysoft.com/" target="_blank" rel="external">异次元</a></li>
<li><a href="ttp://www.portablesoft.org/" target="_blank" rel="external">精品绿色</a></li>
<li><a href="http://www.dayanzai.me/" target="_blank" rel="external">大眼仔</a></li>
<li><a href="http://www.flighty.cn/" target="_blank" rel="external">少轻狂</a></li>
<li><a href="http://www.shaoit.com/" target="_blank" rel="external">殁漂遥</a></li>
<li><a href="http://www.bingdian001.com/" target="_blank" rel="external">冰点软件</a></li>
</ul>
<h2 id="Android软件站点"><a href="#Android软件站点" class="headerlink" title="Android软件站点"></a>Android软件站点</h2><ul>
<li><a href="http://appdp.com/" target="_blank" rel="external">每日APP推送</a></li>
<li><a href="http://www.0dyx.cn/" target="_blank" rel="external">零度游戏源码</a></li>
<li><a href="http://wanga.me/" target="_blank" rel="external">拼命玩游戏</a></li>
<li><a href="https://www.taptap.com/" target="_blank" rel="external">tap游戏墙</a></li>
</ul>
<h2 id="国内源码资源站"><a href="#国内源码资源站" class="headerlink" title="国内源码资源站"></a>国内源码资源站</h2><ul>
<li><a href="http://www.aihao.org/" target="_blank" rel="external">资源爱好者</a></li>
<li><a href="http://www.6m5m.com/index.php" target="_blank" rel="external">游戏素材</a></li>
<li><a href="http://www.src.cool/portal.php" target="_blank" rel="external">车库源码</a></li>
<li><a href="http://www.52h5game.com/" target="_blank" rel="external">我爱h5游戏</a></li>
<li><a href="http://www.panduoduo.net/" target="_blank" rel="external">盘多多</a></li>
<li><a href="http://down.admin5.com/" target="_blank" rel="external">a5</a></li>
<li><a href="http://www.a5.net/" target="_blank" rel="external">A5</a></li>
<li><a href="http://www.huzhan.com/" target="_blank" rel="external">互站</a></li>
<li>[模板集](<a href="http://www.mobanji.com" target="_blank" rel="external">http://www.mobanji.com</a></li>
<li><a href="http://www.mycodes.net/" target="_blank" rel="external">源码之家</a></li>
<li><a href="http://www.codeforge.cn/" target="_blank" rel="external">codeforge</a></li>
<li><a href="https://www.codeproject.com/" target="_blank" rel="external">codeproject</a></li>
<li><a href="https://bbs.wxrym.com/portal.php" target="_blank" rel="external">黑锐</a></li>
<li><a href="http://down.chinaz.com/" target="_blank" rel="external">站长下载</a></li>
<li><a href="http://bbs.52codes.net/forum.php" target="_blank" rel="external">吾爱源码网</a></li>
<li><a href="https://www.freehao123.com/" target="_blank" rel="external">免费资源部落</a></li>
<li><a href="http://www.92kaifa.com/" target="_blank" rel="external">就爱开发</a></li>
</ul>
<h2 id="平台收集"><a href="#平台收集" class="headerlink" title="平台收集"></a>平台收集</h2><ul>
<li><a href="https://zb.oschina.net/projects" target="_blank" rel="external">oschina项目大厅</a></li>
<li><a href="http://www.csto.com/project/list" target="_blank" rel="external">csdn项目列表</a> </li>
<li><a href="https://mart.coding.net/projects" target="_blank" rel="external">码市项目</a></li>
</ul>
<h2 id="国外源码资源网站"><a href="#国外源码资源网站" class="headerlink" title="国外源码资源网站"></a>国外源码资源网站</h2><ul>
<li><a href="https://www.thefreecountry.com/" target="_blank" rel="external">thefreecountry</a></li>
<li><a href="http://www.codeforge.com/" target="_blank" rel="external">codeforge</a></li>
<li><a href="https://www.sourcecodestersourcecodester.com/" target="_blank" rel="external">sourcecodester</a></li>
<li><a href="https://sourceforge.net/" target="_blank" rel="external">sourceforge</a></li>
<li><p><a href="http://openhtml5games.com/" target="_blank" rel="external">H5游戏</a></p>
</li>
<li><p><a href="https://www.freewebtemplates.com/" target="_blank" rel="external">freewebtemplates</a></p>
</li>
</ul>
<h2 id="通用站长平台"><a href="#通用站长平台" class="headerlink" title="通用站长平台"></a>通用站长平台</h2><ul>
<li><a href="http://www.szw86.com" target="_blank" rel="external">首赚网</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      软件及源码仓库收集
    
    </summary>
    
      <category term="killtime" scheme="https://austinxishou.github.io/categories/killtime/"/>
    
    
      <category term="soft" scheme="https://austinxishou.github.io/tags/soft/"/>
    
      <category term="sourcecode" scheme="https://austinxishou.github.io/tags/sourcecode/"/>
    
  </entry>
  
  <entry>
    <title>找资源</title>
    <link href="https://austinxishou.github.io/killtime/cj2skkoks004y18pxcut53zub/killtime/search/"/>
    <id>https://austinxishou.github.io/killtime/cj2skkoks004y18pxcut53zub/killtime/search/</id>
    <published>2017-05-12T02:16:41.521Z</published>
    <updated>2017-05-12T02:25:02.429Z</updated>
    
    <content type="html"><![CDATA[<h2 id="找资源"><a href="#找资源" class="headerlink" title="找资源"></a>找资源</h2><ul>
<li>西林街：<a href="http://www.xilinjie.com/" target="_blank" rel="external">http://www.xilinjie.com/</a></li>
<li>胖次：<a href="http://www.panc.cc/" target="_blank" rel="external">http://www.panc.cc/</a></li>
<li>找文件：<a href="http://www.zhaofile.com/" target="_blank" rel="external">http://www.zhaofile.com/</a></li>
<li>呆木瓜：<a href="http://www.daimugua.com/" target="_blank" rel="external">http://www.daimugua.com/</a></li>
<li>爱挖盘：<a href="http://www.iwapan.com/" target="_blank" rel="external">http://www.iwapan.com/</a></li>
<li>57百度云：<a href="http://baiduyun.57fx.cn/index-index.html" target="_blank" rel="external">http://baiduyun.57fx.cn/index-index.html</a></li>
<li>云盘搜索大师:<a href="http://www.xiandoudou.com/" target="_blank" rel="external">http://www.xiandoudou.com/</a></li>
<li>靠谱搜索:<a href="http://kaopu.so/" target="_blank" rel="external">http://kaopu.so/</a></li>
<li>网盘搜: <a href="http://www.wangpansou.cn/" target="_blank" rel="external">http://www.wangpansou.cn/</a></li>
</ul>
<h2 id="BT种子搜索引擎"><a href="#BT种子搜索引擎" class="headerlink" title="BT种子搜索引擎"></a>BT种子搜索引擎</h2><ul>
<li>BT搜搜  :<a href="http://www.btsoso.me/" target="_blank" rel="external">http://www.btsoso.me/</a></li>
<li>BTbook:  <a href="http://www.btbook.net/" target="_blank" rel="external">http://www.btbook.net/</a></li>
<li>Runbt : <a href="http://www.runbt.com/" target="_blank" rel="external">http://www.runbt.com/</a></li>
<li>Diggbt:  <a href="http://www.diggbt.com/" target="_blank" rel="external">http://www.diggbt.com/</a></li>
<li>BT樱桃:<a href="http://www.btcherry.com/" target="_blank" rel="external">http://www.btcherry.com/</a></li>
<li>BTdigg:  <a href="https://btdigg.org/" target="_blank" rel="external">https://btdigg.org/</a></li>
<li>btsoufuli:  <a href="http://www.btsoufuli.com/" target="_blank" rel="external">http://www.btsoufuli.com/</a></li>
<li>btkitty:  <a href="http://btkitty.bid/" target="_blank" rel="external">http://btkitty.bid/</a></li>
<li>btdao:  <a href="http://www.btdao.biz/" target="_blank" rel="external">http://www.btdao.biz/</a></li>
<li>rarbg:  <a href="https://rarbg.to/torrents.php/" target="_blank" rel="external">https://rarbg.to/torrents.php/</a></li>
<li>btavmo:  <a href="http://www.btavmo.com/" target="_blank" rel="external">http://www.btavmo.com/</a></li>
<li>coretorrents:  <a href="http://coretorrents.com/" target="_blank" rel="external">http://coretorrents.com/</a></li>
<li>mytorrents:  <a href="http://mytorrents.org/" target="_blank" rel="external">http://mytorrents.org/</a></li>
<li>bt1024:  <a href="http://www.bt1024.net/" target="_blank" rel="external">http://www.bt1024.net/</a></li>
</ul>
<h2 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h2><ul>
<li>龙轩导航 : <a href="http://ilxdh.com/" target="_blank" rel="external">http://ilxdh.com/</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      找资源
    
    </summary>
    
      <category term="killtime" scheme="https://austinxishou.github.io/categories/killtime/"/>
    
    
      <category term="driver" scheme="https://austinxishou.github.io/tags/driver/"/>
    
  </entry>
  
  <entry>
    <title>电影资源汇总</title>
    <link href="https://austinxishou.github.io/killtime/cj2skkokp004r18pxmsb9kfz1/killtime/movie/"/>
    <id>https://austinxishou.github.io/killtime/cj2skkokp004r18pxmsb9kfz1/killtime/movie/</id>
    <published>2017-05-12T02:16:41.519Z</published>
    <updated>2017-05-12T02:23:28.103Z</updated>
    
    <content type="html"><![CDATA[<h2 id="电视直播"><a href="#电视直播" class="headerlink" title="电视直播"></a>电视直播</h2><ul>
<li>直播吧: <a href="http://www.zhiboo.net/" target="_blank" rel="external">http://www.zhiboo.net/</a></li>
<li>江苏卫视: <a href="http://live.jstv.com/" target="_blank" rel="external">http://live.jstv.com/</a></li>
<li>jsr体育直播: <a href="http://nba.tmiaoo.com/nba.html" target="_blank" rel="external">http://nba.tmiaoo.com/nba.html</a></li>
</ul>
<h2 id="电影资源网站"><a href="#电影资源网站" class="headerlink" title="电影资源网站"></a>电影资源网站</h2><ul>
<li>PVideos-97:<a href="http://www.id97.com/" target="_blank" rel="external">http://www.id97.com/</a></li>
<li>云影院：<a href="http://www.yunyy.cc/" target="_blank" rel="external">http://www.yunyy.cc/</a></li>
<li>高清控联盟：<a href="http://www.gaoqingkong.com/" target="_blank" rel="external">http://www.gaoqingkong.com/</a></li>
<li>中国高清网：<a href="http://gaoqing.la/" target="_blank" rel="external">http://gaoqing.la/</a></li>
<li>小无相：<a href="http://movtop.cn/" target="_blank" rel="external">http://movtop.cn/</a></li>
<li>优质电影网：<a href="http://www.youzhidy.com/" target="_blank" rel="external">http://www.youzhidy.com/</a></li>
<li>蓝光电影网：<a href="http://www.hd1080.cn/" target="_blank" rel="external">http://www.hd1080.cn/</a></li>
<li>电影王国：<a href="http://www.moviewg.com/" target="_blank" rel="external">http://www.moviewg.com/</a></li>
<li>电影天堂 : <a href="http://www.dy2018.com/" target="_blank" rel="external">http://www.dy2018.com/</a></li>
<li>电影小二网:  <a href="http://movie002.com/" target="_blank" rel="external">http://movie002.com/</a></li>
<li>搬运工 : <a href="http://banyungong.net/" target="_blank" rel="external">http://banyungong.net/</a></li>
<li>龙部落:  <a href="http://www.xuandy.com/" target="_blank" rel="external">http://www.xuandy.com/</a></li>
<li>我飞网:  <a href="http://www.bestxl.com/" target="_blank" rel="external">http://www.bestxl.com/</a></li>
<li>泡饭影视:  <a href="http://www.chapaofan.com/" target="_blank" rel="external">http://www.chapaofan.com/</a></li>
<li>天天美剧:  <a href="http://www.ttmeiju.com/" target="_blank" rel="external">http://www.ttmeiju.com/</a></li>
<li>天天美剧电影:<a href="http://www.ttmeiju.com/meiju/Movie.html" target="_blank" rel="external">http://www.ttmeiju.com/meiju/Movie.html</a></li>
<li>电影FM : <a href="http://dianying.fm/" target="_blank" rel="external">http://dianying.fm/</a></li>
<li>kickass:  <a href="https://kickass.to/" target="_blank" rel="external">https://kickass.to/</a></li>
<li>MP4吧:  <a href="http://www.mp4ba.com/" target="_blank" rel="external">http://www.mp4ba.com/</a></li>
<li>迅播影院:  <a href="http://www.xiamp4.com/" target="_blank" rel="external">http://www.xiamp4.com/</a></li>
<li>新视觉影院:<a href="http://www.yy6080.org/" target="_blank" rel="external">http://www.yy6080.org/</a></li>
<li>深影论坛:<a href="http://www.shinybbs.com/forum.php" target="_blank" rel="external">http://www.shinybbs.com/forum.php</a></li>
<li>破烂熊乐园:<a href="http://www.ragbear.com/" target="_blank" rel="external">http://www.ragbear.com/</a></li>
<li>謦灵风软美剧论坛:<a href="http://1000fr.net/" target="_blank" rel="external">http://1000fr.net/</a></li>
<li>66kk:<a href="http://www.66kk.com/meiju/" target="_blank" rel="external">http://www.66kk.com/meiju/</a></li>
<li>豆瓣皮:<a href="http://movie.doubanpi.com/" target="_blank" rel="external">http://movie.doubanpi.com/</a></li>
<li>豆瓣X:<a href="http://www.doubanx.com/" target="_blank" rel="external">http://www.doubanx.com/</a></li>
<li>特片:<a href="http://www.tepian.com/" target="_blank" rel="external">http://www.tepian.com/</a></li>
<li>同步影院:<a href="http://www.tongbuyy.com/oumeiju/" target="_blank" rel="external">http://www.tongbuyy.com/oumeiju/</a></li>
<li>原来天天美剧网:<a href="http://www.yuanlai521.com/" target="_blank" rel="external">http://www.yuanlai521.com/</a></li>
<li>~~ 高清视界:<a href="http://www.4567.tv/" target="_blank" rel="external">http://www.4567.tv/</a> ~~</li>
<li>8oS: <a href="http://www.80s.tw" target="_blank" rel="external">http://www.80s.tw</a></li>
<li>全看TV : <a href="http://www.quankan.tv/" target="_blank" rel="external">http://www.quankan.tv/</a></li>
<li>起飞电影网 : <a href="http://www.ehecom.com/index.html" target="_blank" rel="external">http://www.ehecom.com/index.html</a></li>
</ul>
<h3 id="手机影院"><a href="#手机影院" class="headerlink" title="手机影院"></a>手机影院</h3><ul>
<li>大卫手机影院 : <a href="http://140tv.com/" target="_blank" rel="external">http://140tv.com/</a></li>
<li>影视之家 : <a href="http://www.yingshimp.com/" target="_blank" rel="external">http://www.yingshimp.com/</a></li>
<li>74hy: <a href="http://www.74hy.com/type/1.html" target="_blank" rel="external">http://www.74hy.com/type/1.html</a></li>
</ul>
<h3 id="纪录片精品网站"><a href="#纪录片精品网站" class="headerlink" title="纪录片精品网站"></a>纪录片精品网站</h3><ul>
<li>Free DocumentAries：<a href="http://freedocumentaries.org/" target="_blank" rel="external">http://freedocumentaries.org/</a></li>
<li>Top DocumentaryFilm：<a href="http://topdocumentaryfilms.com/" target="_blank" rel="external">http://topdocumentaryfilms.com/</a></li>
<li>District 7 Media:<a href="http://www.district7media.net/main/" target="_blank" rel="external">http://www.district7media.net/main/</a></li>
<li>Citizen 4Film:<a href="https://citizenfourfilm.com/" target="_blank" rel="external">https://citizenfourfilm.com/</a></li>
<li>Documentary：<a href="http://documentaryaddict.com/" target="_blank" rel="external">http://documentaryaddict.com/</a></li>
<li>腾讯记录片频道：<a href="http://v.qq.com/doco/" target="_blank" rel="external">http://v.qq.com/doco/</a></li>
<li>央视记录片：<a href="http://jishi.cntv.cn/vod/keji/index.shtml" target="_blank" rel="external">http://jishi.cntv.cn/vod/keji/index.shtml</a></li>
</ul>
<h3 id="国外"><a href="#国外" class="headerlink" title="国外"></a>国外</h3><ul>
<li>iitv : <a href="http://iitv.pl/" target="_blank" rel="external">http://iitv.pl/</a></li>
</ul>
<h2 id="专业影评类网站"><a href="#专业影评类网站" class="headerlink" title="专业影评类网站"></a>专业影评类网站</h2><ul>
<li>时光网: <a href="http://www.mtime.com/community/" target="_blank" rel="external">http://www.mtime.com/community/</a></li>
<li>豆瓣电影:<a href="http://movie.douban.com/" target="_blank" rel="external">http://movie.douban.com/</a></li>
<li>烂番茄: <a href="http://www.rottentomatoes.com/" target="_blank" rel="external">http://www.rottentomatoes.com/</a></li>
<li>IMBD: <a href="http://www.imdb.com/" target="_blank" rel="external">http://www.imdb.com/</a></li>
<li>美国广播影评人协会:<a href="http://www.criticschoice.com/" target="_blank" rel="external">http://www.criticschoice.com/</a></li>
<li>纽约影评家协会:<a href="http://www.nyfcc.com/" target="_blank" rel="external">http://www.nyfcc.com/</a></li>
<li>Film: <a href="http://www.film.com/" target="_blank" rel="external">http://www.film.com/</a></li>
<li>GoodFil.ms: <a href="http://goodfil.ms/" target="_blank" rel="external">http://goodfil.ms/</a></li>
<li>Cinephilia: <a href="http://cinephilia.net/" target="_blank" rel="external">http://cinephilia.net/</a></li>
</ul>
<h2 id="公开课网站"><a href="#公开课网站" class="headerlink" title="公开课网站"></a>公开课网站</h2><ul>
<li>网易公开课：<a href="http://open.163.com/" target="_blank" rel="external">http://open.163.com/</a></li>
<li>中国大学MOOC：<a href="http://www.icourse163.org/" target="_blank" rel="external">http://www.icourse163.org/</a></li>
<li>新浪公开课：<a href="http://open.sina.com.cn/" target="_blank" rel="external">http://open.sina.com.cn/</a></li>
<li>央视网–公开课：<a href="http://opencla.cntv.cn/" target="_blank" rel="external">http://opencla.cntv.cn/</a></li>
<li>爱课堂：<a href="http://www.icourses.cn/home/" target="_blank" rel="external">http://www.icourses.cn/home/</a></li>
<li>MOOC中国：<a href="http://www.mooc.cn/" target="_blank" rel="external">http://www.mooc.cn/</a></li>
<li>超星公开课：<a href="http://openv.chaoxing.com/" target="_blank" rel="external">http://openv.chaoxing.com/</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      电影资源汇总
    
    </summary>
    
      <category term="killtime" scheme="https://austinxishou.github.io/categories/killtime/"/>
    
    
      <category term="video" scheme="https://austinxishou.github.io/tags/video/"/>
    
  </entry>
  
  <entry>
    <title>老司机资源汇总</title>
    <link href="https://austinxishou.github.io/killtime/cj2skkokk004i18px4ood8sps/killtime/driver/"/>
    <id>https://austinxishou.github.io/killtime/cj2skkokk004i18px4ood8sps/killtime/driver/</id>
    <published>2017-05-12T02:16:41.518Z</published>
    <updated>2017-05-12T02:21:51.509Z</updated>
    
    <content type="html"><![CDATA[<h2 id="磁力"><a href="#磁力" class="headerlink" title="磁力"></a>磁力</h2><ul>
<li>磁力播播: <a href="http://cilibobo.cc/" target="_blank" rel="external">http://cilibobo.cc/</a></li>
<li>九秒在线: <a href="http://apiv.ga/magnet/" target="_blank" rel="external">http://apiv.ga/magnet/</a></li>
</ul>
<h2 id="youtube下载"><a href="#youtube下载" class="headerlink" title="youtube下载"></a>youtube下载</h2><ul>
<li>yout: <a href="https://yout.com/" target="_blank" rel="external">https://yout.com/</a></li>
<li>savefrom: <a href="http://en.savefrom.net/" target="_blank" rel="external">http://en.savefrom.net/</a></li>
<li>savemedia: <a href="https://savemedia.com/en/" target="_blank" rel="external">https://savemedia.com/en/</a></li>
<li>clipconverter: <a href="http://www.clipconverter.cc/" target="_blank" rel="external">http://www.clipconverter.cc/</a></li>
</ul>
<h2 id="Tumblr"><a href="#Tumblr" class="headerlink" title="Tumblr"></a>Tumblr</h2><ul>
<li>Tumblr热度: <a href="http://heimu360.applinzi.com/index.php?m=Home&amp;c=Index&amp;a=stat" target="_blank" rel="external">http://heimu360.applinzi.com/index.php?m=Home&amp;c=Index&amp;a=stat</a></li>
<li>91视频: <a href="http://freeget.co/" target="_blank" rel="external">http://freeget.co/</a></li>
</ul>
<h2 id="直播聚合"><a href="#直播聚合" class="headerlink" title="直播聚合"></a>直播聚合</h2><ul>
<li>直播盒子: <a href="http://www.zhubohezi.com/" target="_blank" rel="external">http://www.zhubohezi.com/</a></li>
</ul>
<h3 id="vip视频-广告过滤"><a href="#vip视频-广告过滤" class="headerlink" title="vip视频,广告过滤"></a>vip视频,广告过滤</h3><ul>
<li>硕鼠 : <a href="http://www.flvcd.com/index.htm" target="_blank" rel="external">http://www.flvcd.com/index.htm</a></li>
<li>dsqndh: <a href="http://v.dsqndh.com/" target="_blank" rel="external">http://v.dsqndh.com/</a></li>
<li>紫狐:<a href="http://api.zihu.tv/" target="_blank" rel="external">http://api.zihu.tv/</a></li>
</ul>
<h4 id="测试地址"><a href="#测试地址" class="headerlink" title="测试地址"></a>测试地址</h4><ul>
<li>爱奇艺: <a href="http://www.iqiyi.com/v_19rr9nt2p8.html" target="_blank" rel="external">http://www.iqiyi.com/v_19rr9nt2p8.html</a></li>
<li>优酷: <a href="http://v.youku.com/v_show/id_XMTc3NjUxMDU2MA==.html?spm=a2h03.8164468.2069780.11" target="_blank" rel="external">http://v.youku.com/v_show/id_XMTc3NjUxMDU2MA==.html?spm=a2h03.8164468.2069780.11</a></li>
<li>乐视: <a href="http://www.le.com/ptv/vplay/26677046.html?ref=hypdrydp" target="_blank" rel="external">http://www.le.com/ptv/vplay/26677046.html?ref=hypdrydp</a></li>
<li>芒果TV: <a href="http://www.mgtv.com/v/1/303260/f/3665598.html" target="_blank" rel="external">http://www.mgtv.com/v/1/303260/f/3665598.html</a></li>
<li>腾讯: <a href="http://v.qq.com/x/cover/mhlkz47d7thi2k4.html" target="_blank" rel="external">http://v.qq.com/x/cover/mhlkz47d7thi2k4.html</a></li>
</ul>
<h4 id="通用接口"><a href="#通用接口" class="headerlink" title="通用接口"></a>通用接口</h4><ul>
<li>wmxz: <a href="http://www.wmxz.wang/video.php?url=http://www.mgtv.com/v/1/303260/f/3665598.html" target="_blank" rel="external">http://www.wmxz.wang/video.php?url=http://www.mgtv.com/v/1/303260/f/3665598.html</a> (<code>高清</code>)<br><code>其他域名http://100000001.top(1-10):支持域名绑定A记录解析到47.89.49.245</code></li>
<li><del>aikantv: <a href="http://jx.aikantv.cc/index.php?url=http://www.mgtv.com/v/3/8849/f/307467.html" target="_blank" rel="external">http://jx.aikantv.cc/index.php?url=http://www.mgtv.com/v/3/8849/f/307467.html</a> (<code>高清</code>)</del></li>
<li>moondown:<a href="http://moon.moondown.net/tong.php?url=http://www.mgtv.com/v/2/104817/f/3621326.html" target="_blank" rel="external">http://moon.moondown.net/tong.php?url=http://www.mgtv.com/v/2/104817/f/3621326.html</a> <a href="http://moon.moondown.net/moon.php" target="_blank" rel="external">测试页面</a></li>
<li>000o: <a href="http://000o.cc/jx/ty.php?url=http://www.mgtv.com/v/1/298442/f/3640929.html" target="_blank" rel="external">http://000o.cc/jx/ty.php?url=http://www.mgtv.com/v/1/298442/f/3640929.html</a></li>
<li>yydy8: <a href="http://www.yydy8.com/Common/?url=http://www.mgtv.com/v/1/303260/f/3665598.html" target="_blank" rel="external">http://www.yydy8.com/Common/?url=http://www.mgtv.com/v/1/303260/f/3665598.html</a> (<code>高清</code>)</li>
<li><del>ckparse: <a href="http://www.ckparse.com/ckparse/?url=http://www.mgtv.com/v/1/303260/f/3665598.html" target="_blank" rel="external">http://www.ckparse.com/ckparse/?url=http://www.mgtv.com/v/1/303260/f/3665598.html</a> (<code>高清</code>)</del></li>
<li>九澧影院:<a href="http://dy.jiuli8.com/jiuli8/?url=" target="_blank" rel="external">http://dy.jiuli8.com/jiuli8/?url=</a></li>
<li>紫狐:<a href="http://yun.zihu.tv/play.html?url=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html" target="_blank" rel="external">http://yun.zihu.tv/play.html?url=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html</a></li>
<li>wbg3721:<a href="http://api.wbg3721.club/?url=http://www.iqiyi.com/v_19rrm2pgd4.html?fc=8b62d5327a54411b#vfrm=19-9-0-1" target="_blank" rel="external">http://api.wbg3721.club/?url=http://www.iqiyi.com/v_19rrm2pgd4.html?fc=8b62d5327a54411b#vfrm=19-9-0-1</a></li>
<li><del>mp4la : <a href="http://api.mp4la.net/?url=http://v.youku.com/v_show/id_XMTc3NjUxMDU2MA==.html?spm=a2h03.8164468.2069780.11" target="_blank" rel="external">http://api.mp4la.net/?url=http://v.youku.com/v_show/id_XMTc3NjUxMDU2MA==.html?spm=a2h03.8164468.2069780.11</a></del></li>
<li><del>990969_1: <a href="http://www.990969.top/jiu/vip1.php?url=http://www.iqiyi.com/v_19rr9nt2p8.html" target="_blank" rel="external">http://www.990969.top/jiu/vip1.php?url=http://www.iqiyi.com/v_19rr9nt2p8.html</a></del></li>
<li><del>990969_2: <a href="http://www.990969.top/jiu/vip2.php?url=http://www.iqiyi.com/v_19rr9nt2p8.html" target="_blank" rel="external">http://www.990969.top/jiu/vip2.php?url=http://www.iqiyi.com/v_19rr9nt2p8.html</a></del></li>
<li><del>990969_3: <a href="http://www.990969.top/jiu/vip3.php?url=http://www.iqiyi.com/v_19rr9nt2p8.html" target="_blank" rel="external">http://www.990969.top/jiu/vip3.php?url=http://www.iqiyi.com/v_19rr9nt2p8.html</a></del></li>
<li><del>mt2t:<a href="http://mt2t.com/yun?url=http://www.mgtv.com/v/1/303260/f/3665598.html" target="_blank" rel="external">http://mt2t.com/yun?url=http://www.mgtv.com/v/1/303260/f/3665598.html</a></del></li>
<li><del>五奇艺:<a href="http://vip.sdyhy.cn/ckflv/?url=" target="_blank" rel="external">http://vip.sdyhy.cn/ckflv/?url=</a></del></li>
<li>qtzr:<a href="http://qtzr.net/s/?qt=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html" target="_blank" rel="external">http://qtzr.net/s/?qt=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html</a></li>
<li><del>xiguaso:<a href="http://www.xiguaso.com/api/index.php?url=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html" target="_blank" rel="external">http://www.xiguaso.com/api/index.php?url=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html</a></del></li>
<li>vipjiexi:<a href="http://www.vipjiexi.com/yun.php?url=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html" target="_blank" rel="external">http://www.vipjiexi.com/yun.php?url=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html</a></li>
</ul>
<h4 id="芒果tv"><a href="#芒果tv" class="headerlink" title="芒果tv"></a>芒果tv</h4><ul>
<li>47ks: <a href="http://v.47ks.com/v2/videoplayer/api.html?u=http://www.mgtv.com/v/3/293930/f/3623801.html" target="_blank" rel="external">http://v.47ks.com/v2/videoplayer/api.html?u=http://www.mgtv.com/v/3/293930/f/3623801.html</a></li>
<li>mmhhw: <a href="http://api.mmhhw.cn/huan6/mgtv.php?vid=3665598" target="_blank" rel="external">http://api.mmhhw.cn/huan6/mgtv.php?vid=3665598</a></li>
<li>1314yq: <a href="http://api.1314yq.com/mgtv.php?url=http://www.mgtv.com/v/1/303260/f/3665598.html" target="_blank" rel="external">http://api.1314yq.com/mgtv.php?url=http://www.mgtv.com/v/1/303260/f/3665598.html</a></li>
<li>52jizhi: <a href="http://52jizhi.cn/6/vip1.php?url=http://www.mgtv.com/v/1/303260/f/3665598.html" target="_blank" rel="external">http://52jizhi.cn/6/vip1.php?url=http://www.mgtv.com/v/1/303260/f/3665598.html</a></li>
</ul>
<h4 id="优酷"><a href="#优酷" class="headerlink" title="优酷"></a>优酷</h4><ul>
<li>200919 :  <a href="http://www.200919.com/tv/v.php?url=http://v.youku.com/v_show/id_XMTc3NjUxMDU2MA==.html?spm=a2h03.8164468.2069780.11" target="_blank" rel="external">http://www.200919.com/tv/v.php?url=http://v.youku.com/v_show/id_XMTc3NjUxMDU2MA==.html?spm=a2h03.8164468.2069780.11</a></li>
<li>quankan : <a href="http://www.quankan.tv/playz/youku.php?url=http://v.youku.com/v_show/id_XMTc2NjA1NDgwNA==.html?spm=a2h03.8164468.2069780.5" target="_blank" rel="external">http://www.quankan.tv/playz/youku.php?url=http://v.youku.com/v_show/id_XMTc2NjA1NDgwNA==.html?spm=a2h03.8164468.2069780.5</a></li>
<li>moease: <a href="http://www.moease.org/tao_ddv.php?vid=http://v.youku.com/v_show/id_XMTc3NjUxMDU2MA==.html?spm=a2h03.8164468.2069780.11" target="_blank" rel="external">http://www.moease.org/tao_ddv.php?vid=http://v.youku.com/v_show/id_XMTc3NjUxMDU2MA==.html?spm=a2h03.8164468.2069780.11</a></li>
<li>mmhhw : <a href="http://api.mmhhw.cn/huan6/mgtv66.php?vid=CMzcxNTUzMg==" target="_blank" rel="external">http://api.mmhhw.cn/huan6/mgtv66.php?vid=CMzcxNTUzMg==</a> (c值)</li>
<li>zhaogou8 : <a href="http://ykyun.zhaogou8.com/?v=CNjgzODc5Ng==" target="_blank" rel="external">http://ykyun.zhaogou8.com/?v=CNjgzODc5Ng==</a> (c值)</li>
<li>zai63 : <a href="http://player.zai63.com/yunparse/?vid=CMzcxNTUzMg==" target="_blank" rel="external">http://player.zai63.com/yunparse/?vid=CMzcxNTUzMg==</a> (c值)</li>
</ul>
<h4 id="腾讯"><a href="#腾讯" class="headerlink" title="腾讯"></a>腾讯</h4><ul>
<li>quankan: <a href="http://www.quankan.tv/playpc/index.php?url=http://v.qq.com/x/cover/nye24rhm7f8dyry.html" target="_blank" rel="external">http://www.quankan.tv/playpc/index.php?url=http://v.qq.com/x/cover/nye24rhm7f8dyry.html</a></li>
<li>aikantv: <a href="http://api.aikantv.cc/?url=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html" target="_blank" rel="external">http://api.aikantv.cc/?url=http://v.qq.com/x/cover/mhlkz47d7thi2k4.html</a></li>
<li>apifree : <a href="http://www.apifree.net/ckplayer.jsp?id=apifree&amp;sp=vqq&amp;by=url&amp;value=http%3A%2F%2Fv.qq.com%2Fx%2Fcover%2Fczi2qltdys4wc3k.html&amp;single=" target="_blank" rel="external">http://www.apifree.net/ckplayer.jsp?id=apifree&amp;sp=vqq&amp;by=url&amp;value=http%3A%2F%2Fv.qq.com%2Fx%2Fcover%2Fczi2qltdys4wc3k.html&amp;single=</a></li>
</ul>
<h4 id="爱奇艺"><a href="#爱奇艺" class="headerlink" title="爱奇艺"></a>爱奇艺</h4><ul>
<li>72du: <a href="http://v.72du.com/api/?url=http://www.iqiyi.com/v_19rr9nt2p8.html" target="_blank" rel="external">http://v.72du.com/api/?url=http://www.iqiyi.com/v_19rr9nt2p8.html</a></li>
<li>ckplayer: <a href="http://ckplayer.duapp.com/?url=http://www.iqiyi.com/v_19rr9nt2p8.html" target="_blank" rel="external">http://ckplayer.duapp.com/?url=http://www.iqiyi.com/v_19rr9nt2p8.html</a></li>
<li>yydy8: <a href="http://www.yydy8.com/Common/?url=http://www.iqiyi.com/v_19rr9nt2p8.html" target="_blank" rel="external">http://www.yydy8.com/Common/?url=http://www.iqiyi.com/v_19rr9nt2p8.html</a></li>
<li>97zxkan: <a href="http://www.97zxkan.com/jiexi/97zxkanapi.php?url=http://www.iqiyi.com/v_19rr9nt2p8.html" target="_blank" rel="external">http://www.97zxkan.com/jiexi/97zxkanapi.php?url=http://www.iqiyi.com/v_19rr9nt2p8.html</a></li>
<li>20000817: <a href="http://sp.20000817.pw/?url=http://www.iqiyi.com/v_19rrm2t3x0.html" target="_blank" rel="external">http://sp.20000817.pw/?url=http://www.iqiyi.com/v_19rrm2t3x0.html</a></li>
<li>wanwantv: <a href="http://vip.wanwantv.com/yunparse/?url=http://www.iqiyi.com/v_19rrlzki4s.html" target="_blank" rel="external">http://vip.wanwantv.com/yunparse/?url=http://www.iqiyi.com/v_19rrlzki4s.html</a></li>
</ul>
<h4 id="乐视"><a href="#乐视" class="headerlink" title="乐视"></a>乐视</h4><ul>
<li>mmhhw:<a href="http://api.mmhhw.cn/huan6/letvvip.php?vid=26677046" target="_blank" rel="external">http://api.mmhhw.cn/huan6/letvvip.php?vid=26677046</a></li>
</ul>
<h4 id="A-站"><a href="#A-站" class="headerlink" title="A 站"></a>A 站</h4><ul>
<li>aiwlan : <a href="http://hp.aiwlan.net/79iw.php?vid=1238251&amp;t=ykyun&amp;w=100%&amp;h=94%" target="_blank" rel="external">http://hp.aiwlan.net/79iw.php?vid=1238251&amp;t=ykyun&amp;w=100%&amp;h=94%</a></li>
</ul>
<h4 id="2mm"><a href="#2mm" class="headerlink" title="2mm"></a>2mm</h4><ul>
<li>moondown:<a href="http://moon.moondown.net/2mm.php?url=http://www.2ni.la/sy147" target="_blank" rel="external">http://moon.moondown.net/2mm.php?url=http://www.2ni.la/sy147</a></li>
</ul>
<h4 id="接口失效黑色单"><a href="#接口失效黑色单" class="headerlink" title="接口失效黑色单"></a>接口失效黑色单</h4><ul>
<li>jiexi.71ki.com</li>
<li>wyccoo.cn</li>
<li>avziliao</li>
<li>lklhd</li>
<li>ehecom.com</li>
<li>ivlook.com</li>
<li>rpsofts.com</li>
<li>shop.freegx.cn</li>
<li>licoy.cn</li>
<li>yunbofang.duapp.cn</li>
<li>api.ppypp</li>
<li>ccok.top</li>
<li>qqdzz.com</li>
<li>vip.77ds.vip</li>
<li>litools.licoy.cn</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li>舒克高清视频下载:<a href="http://www.shokdown.com/index.php" target="_blank" rel="external">http://www.shokdown.com/index.php</a></li>
<li>夏贝贝网盘: <a href="http://xabb360.net/index.php?m=Login" target="_blank" rel="external">http://xabb360.net/index.php?m=Login</a></li>
<li>uzer: <a href="https://uzer.me/" target="_blank" rel="external">https://uzer.me/</a></li>
<li>买家秀: <a href="http://www.mjxzs.cc/" target="_blank" rel="external">http://www.mjxzs.cc/</a></li>
<li>豆瓣请不要害羞: <a href="https://f.binux.me/haixiuzu.html" target="_blank" rel="external">https://f.binux.me/haixiuzu.html</a></li>
<li>豆瓣请不要害羞: <a href="https://haixiu.herokuapp.com/" target="_blank" rel="external">https://haixiu.herokuapp.com/</a></li>
<li>reddit: <a href="https://www.reddit.com/" target="_blank" rel="external">https://www.reddit.com/</a></li>
<li>微博视频下载: <a href="http://www.weibovideo.com/" target="_blank" rel="external">http://www.weibovideo.com/</a></li>
<li>bilibili解析: <a href="http://www.ibilibili.com/video/av8355080/" target="_blank" rel="external">http://www.ibilibili.com/video/av8355080/</a></li>
<li>斗鱼火箭监控: <a href="http://douyu.shiniv.com/" target="_blank" rel="external">http://douyu.shiniv.com/</a></li>
<li>百度外链不限速: <a href="http://pan.plyz.net/" target="_blank" rel="external">http://pan.plyz.net/</a></li>
<li>福利油猴脚本: <a href="https://sleazyfork.org/zh-CN" target="_blank" rel="external">https://sleazyfork.org/zh-CN</a></li>
<li>网易云音乐: <a href="http://projects.qiyichao.cn/netease-music-parse/" target="_blank" rel="external">http://projects.qiyichao.cn/netease-music-parse/</a></li>
</ul>
<h2 id="资讯"><a href="#资讯" class="headerlink" title="资讯"></a>资讯</h2><ul>
<li>免费吧: <a href="http://www.mianfeib.com/" target="_blank" rel="external">http://www.mianfeib.com/</a></li>
<li>福利吧: <a href="http://fuliba.net/" target="_blank" rel="external">http://fuliba.net/</a></li>
<li>nanrenfuli: <a href="http://www.nanrenfuli.com" target="_blank" rel="external">http://www.nanrenfuli.com</a></li>
<li>番号村: <a href="http://www.fanhaocun.com/" target="_blank" rel="external">http://www.fanhaocun.com/</a></li>
<li>宅男福利社: <a href="http://www.zhainanfulishe.net/" target="_blank" rel="external">http://www.zhainanfulishe.net/</a></li>
<li>avbaike: <a href="http://www.avbaike.net" target="_blank" rel="external">http://www.avbaike.net</a></li>
<li>leglegs: <a href="http://www.leglegs.com/" target="_blank" rel="external">http://www.leglegs.com/</a></li>
<li>sexvid: <a href="http://sexvid.cc/" target="_blank" rel="external">http://sexvid.cc/</a></li>
<li>fuzokuav: <a href="http://fuzokuav.com/main.html" target="_blank" rel="external">http://fuzokuav.com/main.html</a></li>
<li>和邪社: <a href="http://www.hexieshe.com/" target="_blank" rel="external">http://www.hexieshe.com/</a></li>
<li>magazinesdownload: <a href="http://magazinesdownload.org/" target="_blank" rel="external">http://magazinesdownload.org/</a></li>
<li>vr: <a href="https://www.alicex.com/" target="_blank" rel="external">https://www.alicex.com/</a></li>
<li>绝对领域 : <a href="http://www.jdlingyu.moe/" target="_blank" rel="external">http://www.jdlingyu.moe/</a></li>
<li>骨感女穿包臀裙:<a href="https://www.douban.com/photos/album/1632810621/" target="_blank" rel="external">https://www.douban.com/photos/album/1632810621/</a></li>
<li>别总是在我背后:<a href="https://www.douban.com/people/56491865/" target="_blank" rel="external">https://www.douban.com/people/56491865/</a></li>
<li>看bilibili:<a href="http://www.kanbilibili.com/" target="_blank" rel="external">http://www.kanbilibili.com/</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      老司机资源汇总
    
    </summary>
    
      <category term="killtime" scheme="https://austinxishou.github.io/categories/killtime/"/>
    
    
      <category term="driver" scheme="https://austinxishou.github.io/tags/driver/"/>
    
  </entry>
  
  <entry>
    <title>游戏站推荐</title>
    <link href="https://austinxishou.github.io/killtime/cj2skkokn004o18px82vunicb/killtime/game/"/>
    <id>https://austinxishou.github.io/killtime/cj2skkokn004o18px82vunicb/killtime/game/</id>
    <published>2017-05-12T02:16:41.518Z</published>
    <updated>2017-05-12T02:34:12.758Z</updated>
    
    <content type="html"><![CDATA[<ul>
<li>拼命玩游戏 : <a href="http://wanga.me/" target="_blank" rel="external">http://wanga.me/</a></li>
<li>ArmorGames : <a href="http://armorgames.com/" target="_blank" rel="external">http://armorgames.com/</a></li>
<li>u77汉化 : <a href="http://www.u77.com/" target="_blank" rel="external">http://www.u77.com/</a></li>
<li>taptap : <a href="https://www.taptap.com/" target="_blank" rel="external">https://www.taptap.com/</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      游戏站推荐
    
    </summary>
    
      <category term="killtime" scheme="https://austinxishou.github.io/categories/killtime/"/>
    
    
      <category term="killtime" scheme="https://austinxishou.github.io/tags/killtime/"/>
    
      <category term="football" scheme="https://austinxishou.github.io/tags/football/"/>
    
  </entry>
  
  <entry>
    <title>设计资源汇总</title>
    <link href="https://austinxishou.github.io/killtime/cj2skkokj004f18pxlvy8drct/killtime/design/"/>
    <id>https://austinxishou.github.io/killtime/cj2skkokj004f18pxlvy8drct/killtime/design/</id>
    <published>2017-05-12T02:16:41.517Z</published>
    <updated>2017-05-12T02:21:02.414Z</updated>
    
    <content type="html"><![CDATA[<h2 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h2><ul>
<li>牛大拿:<a href="http://niudana.com/" target="_blank" rel="external">http://niudana.com/</a></li>
</ul>
<h2 id="视频素材"><a href="#视频素材" class="headerlink" title="视频素材"></a>视频素材</h2><ul>
<li>视崛:<a href="http://www.shij001.com/" target="_blank" rel="external">http://www.shij001.com/</a></li>
<li>92素材网:<a href="http://www.92sucai.com/" target="_blank" rel="external">http://www.92sucai.com/</a></li>
<li>新GG儿:<a href="http://www.newcger.com/" target="_blank" rel="external">http://www.newcger.com/</a></li>
<li>39视频:<a href="http://www.39video.com/" target="_blank" rel="external">http://www.39video.com/</a></li>
</ul>
<h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><ul>
<li>找字体: <a href="http://www.qiuziti.com/" target="_blank" rel="external">http://www.qiuziti.com/</a></li>
</ul>
<h2 id="设计网站"><a href="#设计网站" class="headerlink" title="设计网站"></a>设计网站</h2><ul>
<li>优设: <a href="http://www.uisdc.com" target="_blank" rel="external">http://www.uisdc.com</a></li>
<li>设计癖 : <a href="http://www.shejipi.com/" target="_blank" rel="external">http://www.shejipi.com/</a></li>
<li>站酷 : <a href="http://www.zcool.com.cn" target="_blank" rel="external">http://www.zcool.com.cn</a></li>
<li>indienova : <a href="http://indienova.com/" target="_blank" rel="external">http://indienova.com/</a></li>
<li>建筑 : <a href="http://afasiaarchzine.com/" target="_blank" rel="external">http://afasiaarchzine.com/</a></li>
<li>创客贴 : <a href="https://www.chuangkit.com/" target="_blank" rel="external">https://www.chuangkit.com/</a></li>
</ul>
<h2 id="设计工具"><a href="#设计工具" class="headerlink" title="设计工具"></a>设计工具</h2><ul>
<li>马克鳗设计稿标注 : <a href="http://www.getmarkman.com/" target="_blank" rel="external">http://www.getmarkman.com/</a></li>
<li>cutterman切图标注 : <a href="http://www.cutterman.cn/parker" target="_blank" rel="external">http://www.cutterman.cn/parker</a></li>
<li>标你妹 : <a href="http://www.biaonimeia.com/main" target="_blank" rel="external">http://www.biaonimeia.com/main</a></li>
<li>截图贴图 : <a href="http://zh.snipaste.com/" target="_blank" rel="external">http://zh.snipaste.com/</a></li>
<li>配色 : <a href="http://www.fancynode.com.cn/colorcube/home" target="_blank" rel="external">http://www.fancynode.com.cn/colorcube/home</a></li>
</ul>
<h2 id="壁纸"><a href="#壁纸" class="headerlink" title="壁纸"></a>壁纸</h2><ul>
<li>picswalls : <a href="http://www.picswalls.com/" target="_blank" rel="external">http://www.picswalls.com/</a></li>
<li>brothersoft : <a href="http://wallpapers.brothersoft.com/" target="_blank" rel="external">http://wallpapers.brothersoft.com/</a></li>
</ul>
<h2 id="Icon"><a href="#Icon" class="headerlink" title="Icon"></a>Icon</h2><ul>
<li>nucleoapp : <a href="https://nucleoapp.com/" target="_blank" rel="external">https://nucleoapp.com/</a></li>
<li>easyicon : <a href="http://www.easyicon.net/" target="_blank" rel="external">http://www.easyicon.net/</a></li>
<li>dribbble : <a href="https://dribbble.com/" target="_blank" rel="external">https://dribbble.com/</a></li>
<li>pixabay : <a href="http://pixabay.com/" target="_blank" rel="external">http://pixabay.com/</a></li>
<li>on1 : <a href="http://www.on1.com/500px/" target="_blank" rel="external">http://www.on1.com/500px/</a></li>
<li>icons8 : <a href="http://icons8.com/" target="_blank" rel="external">http://icons8.com/</a></li>
<li>findicons : <a href="http://findicons.com" target="_blank" rel="external">http://findicons.com</a></li>
<li>iconmatrix : <a href="http://iconmatrix.sharpmark.net/" target="_blank" rel="external">http://iconmatrix.sharpmark.net/</a></li>
<li>thenounproject : <a href="https://thenounproject.com/" target="_blank" rel="external">https://thenounproject.com/</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      设计资源汇总 网页设计资源
    
    </summary>
    
      <category term="killtime" scheme="https://austinxishou.github.io/categories/killtime/"/>
    
    
      <category term="design" scheme="https://austinxishou.github.io/tags/design/"/>
    
  </entry>
  
  <entry>
    <title>IT技术站点收集</title>
    <link href="https://austinxishou.github.io/killtime/cj2skkokm004m18pxcq7sgkdm/killtime/ittech_site/"/>
    <id>https://austinxishou.github.io/killtime/cj2skkokm004m18pxcq7sgkdm/killtime/ittech_site/</id>
    <published>2017-05-12T02:16:41.513Z</published>
    <updated>2017-05-12T06:35:02.465Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h2><ul>
<li><a href="http://www.androidchina.net/" target="_blank" rel="external">Android开发中文站</a></li>
<li><a href="http://p.codekk.com/" target="_blank" rel="external">codeKK</a></li>
<li><a href="https://juejin.im/#/" target="_blank" rel="external">稀土掘金</a></li>
<li><a href="http://www.jcodecraeer.com/" target="_blank" rel="external">泡在网上的日子</a></li>
<li><a href="http://www.phpxs.com/code" target="_blank" rel="external">代码片段</a></li>
<li><a href="http://www.devstore.cn/" target="_blank" rel="external">DevStore</a></li>
<li><a href="http://www.androidweekly.cn/" target="_blank" rel="external">技术周报</a></li>
<li><a href="http://www.trinea.cn/" target="_blank" rel="external">Trinea</a></li>
</ul>
<h2 id="webdesign-worldpress"><a href="#webdesign-worldpress" class="headerlink" title="webdesign-worldpress"></a>webdesign-worldpress</h2><ul>
<li><a href="https://perishablepress.com/" target="_blank" rel="external">perishablepress</a></li>
<li><a href="http://www.cssflow.com/" target="_blank" rel="external">cssflow</a></li>
<li><a href="http://www.webappers.com/" target="_blank" rel="external">webappers</a></li>
<li><a href="https://www.smashingmagazine.com/" target="_blank" rel="external">smashingmagazine</a></li>
</ul>
<h2 id="C-C"><a href="#C-C" class="headerlink" title="C/C++"></a>C/C++</h2><ul>
<li><a href="http://forums.codeguru.com/" target="_blank" rel="external"></a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      IT技术站点收集
    
    </summary>
    
      <category term="killtime" scheme="https://austinxishou.github.io/categories/killtime/"/>
    
    
      <category term="killtime" scheme="https://austinxishou.github.io/tags/killtime/"/>
    
      <category term="ittech" scheme="https://austinxishou.github.io/tags/ittech/"/>
    
  </entry>
  
  <entry>
    <title>Android 冻结APP</title>
    <link href="https://austinxishou.github.io/android/cj2skkojy003218pxhby2ysvs/android/Android%20%E5%86%BB%E7%BB%93%E4%B8%8D%E5%B8%B8%E7%94%A8%E7%9A%84app/"/>
    <id>https://austinxishou.github.io/android/cj2skkojy003218pxhby2ysvs/android/Android 冻结不常用的app/</id>
    <published>2017-05-04T03:07:12.925Z</published>
    <updated>2017-05-04T03:18:20.887Z</updated>
    
    <content type="html"><![CDATA[<h2 id="功能说明"><a href="#功能说明" class="headerlink" title="功能说明"></a>功能说明</h2><blockquote>
<p>在国内的Android生态中,所有的APP开发者都是一种流氓的心态,后台服务一大堆,还监听各种广播,导致用户根本不可能完全删除后台服务;有人说既然他们流氓,你不用他们就是,卸载掉啊!!哎,一些主流公司的APP,即使知道他流氓,还真的继续用它,比如支付宝\微信等;</p>
<p>所以采用冻结的方法是最有效,最干净的,只是可惜<strong> pm disable </strong>这个权限Android并没有对普通应用开放,也是一个蛋疼的事情.Android生态也是,申请各种权限不需要root,反而关闭权限需要;</p>
</blockquote>
<p>使用冻结APP的场景:</p>
<ol>
<li>某些应用开启大量后台服务,导致系统响应缓慢,再不能卸载的情况下,冻结它;</li>
<li>某些不常用的APP,但是需要的时候重新下载又麻烦,冻结它;</li>
<li>某些应用后台大量更新数据,消耗流量,冻结它;</li>
<li>冻结app解冻后,保留所有应用数据,不用担心数据丢失,账号重新登录等;</li>
</ol>
<h2 id="主要代码实现"><a href="#主要代码实现" class="headerlink" title="主要代码实现"></a>主要代码实现</h2><p>冻结APP<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">disableApp</span><span class="params">(String appPackageName)</span></span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        Process localProcess=Runtime.getRuntime().exec(<span class="string">"su"</span>);</div><div class="line">        String cmd=<span class="string">"pm disable "</span>+appPackageName+<span class="string">"\n"</span>;</div><div class="line">        DataOutputStream dataOutputStream=<span class="keyword">new</span> DataOutputStream(localProcess.getOutputStream());</div><div class="line">        dataOutputStream.writeBytes(cmd);</div><div class="line">        dataOutputStream.flush();</div><div class="line">        dataOutputStream.writeBytes(<span class="string">"exit\n"</span>);</div><div class="line"></div><div class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>解冻APP<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enableApp</span><span class="params">(String appPackageName)</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        Process localProcess=Runtime.getRuntime().exec(<span class="string">"su"</span>);</div><div class="line">        String cmd=<span class="string">"pm enable "</span>+appPackageName+<span class="string">"\n"</span>;</div><div class="line">        DataOutputStream dataOutputStream=<span class="keyword">new</span> DataOutputStream(localProcess.getOutputStream());</div><div class="line">        dataOutputStream.writeBytes(cmd);</div><div class="line">        dataOutputStream.flush();</div><div class="line">        dataOutputStream.writeBytes(<span class="string">"exit\n"</span>);</div><div class="line"></div><div class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      Android pm disable
    
    </summary>
    
      <category term="android" scheme="https://austinxishou.github.io/categories/android/"/>
    
    
      <category term="android" scheme="https://austinxishou.github.io/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>python 多线程实践</title>
    <link href="https://austinxishou.github.io/python/cj2skkokw005918pxs7h2yfnd/python/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E8%B7%B5/"/>
    <id>https://austinxishou.github.io/python/cj2skkokw005918pxs7h2yfnd/python/python多线程实践/</id>
    <published>2017-05-04T01:43:52.969Z</published>
    <updated>2017-05-04T03:02:41.990Z</updated>
    
    <content type="html"><![CDATA[<h2 id="多线程-threading模块"><a href="#多线程-threading模块" class="headerlink" title="多线程 threading模块"></a>多线程 threading模块</h2><blockquote>
<p>Python中的多线程操作有两种方式： 函数式(thread)和继承(threading.Threading)式</p>
<p>python是支持多线程的，并且是native的线程。主要是通过thread和threading这两个模块来实现的。thread是比较底层的模 块，threading是对thread做了一些包装的，可以更加方便的被使用。</p>
</blockquote>
<p><strong> 函数式 </strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">def function adbc()</div><div class="line">threading.Thread(target=fun,args=(a,b))</div><div class="line">或者</div><div class="line">thread.start_new_thread(fun,(a,b))启动线程</div></pre></td></tr></table></figure></p>
<h2 id="守护进程"><a href="#守护进程" class="headerlink" title="守护进程"></a>守护进程</h2><blockquote>
<p>如果你的主线程在退出的时候，不用等待那些子线程完成，那就设置这些线程的 daemon 属性。即，在线程开始 thread.start()之前，调用setDeamon()函数，设定线程的daemon标志。thread.setDaemon(True)就表示这个线程“不重要”。</p>
<p>如果你想等待子线程完成再退出，那就什么都不用做。，或者显示地调用thread.setDaemon(False)，设置daemon的值为false。新的子线程会继承父线程的daemon标志。整个Python会在所有的非守护线程退出后才会结束，即进程中没有非守护线程存在的时候才结束。</p>
<p>根据原装官方文档的解释，主线程在所有非守护线程都死亡后才会被kill，这样当你忘记使用threading.Thread.exit_thread()或者thread_stop()的时候，嘿嘿，你的程序中主线程收到结束信号，但是因为有一个非守护进程的存在，所以等待。</p>
</blockquote>
<h2 id="Queue模块"><a href="#Queue模块" class="headerlink" title="Queue模块"></a>Queue模块</h2><blockquote>
<p>Queue模块实现了多生产者、多消费者队列。它特别适用于信息必须在多个线程间安全地交换的多线程程序中。这个模块中的Queue类实现了所有必须的锁语义。它依赖于Python中线程支持的可用性；参见threading模块。</p>
</blockquote>
<h3 id="特性参数"><a href="#特性参数" class="headerlink" title="特性参数"></a>特性参数</h3><p>模块实现了三类队列：FIFO（First In First Out，先进先出，默认为该队列）、LIFO（Last In First Out，后进先出）、基于优先级的队列。以下为其常用方法：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">先进先出  q = Queue.Queue(maxsize)</div><div class="line">后进先出  a = Queue.LifoQueue(maxsize)</div><div class="line">优先级  Queue.PriorityQueue(maxsize)</div><div class="line">Queue.qsize() 返回队列的大小</div><div class="line">Queue.empty() 如果队列为空，返回<span class="keyword">True</span>,反之<span class="keyword">False</span></div><div class="line">Queue.full() 如果队列满了，返回<span class="keyword">True</span>,反之<span class="keyword">False</span></div><div class="line">Queue.full 与 maxsize 大小对应</div><div class="line">Queue.put(item) 写入队列，timeout等待时间   非阻塞</div><div class="line">Queue.get([block[, timeout]]) 获取队列，timeout等待时间</div><div class="line">Queue.get_nowait() 相当Queue.get(<span class="keyword">False</span>)</div><div class="line">Queue.put_nowait(item) 相当Queue.put(item, <span class="keyword">False</span>)</div><div class="line">Queue.task_done() 在完成一项工作之后，函数向任务已经完成的队列发送一个信号</div><div class="line">Queue.join()： 实际上意味着等到队列为空，再执行别的操作</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      python 多线程 threading Queue daemon
    
    </summary>
    
      <category term="python" scheme="https://austinxishou.github.io/categories/python/"/>
    
    
      <category term="python" scheme="https://austinxishou.github.io/tags/python/"/>
    
      <category term="threading" scheme="https://austinxishou.github.io/tags/threading/"/>
    
  </entry>
  
  <entry>
    <title>Android-OTA(四) updater功能解析</title>
    <link href="https://austinxishou.github.io/android/cj2skkok0003718px5hhq5z9h/android/Android-OTA(%E5%9B%9B)%20updater%E5%8A%9F%E8%83%BD%E8%A7%A3%E6%9E%90/"/>
    <id>https://austinxishou.github.io/android/cj2skkok0003718px5hhq5z9h/android/Android-OTA(四) updater功能解析/</id>
    <published>2017-04-14T09:12:59.419Z</published>
    <updated>2017-04-14T10:06:30.928Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote>
<p>可以说，前面分析的OTA升级的各部分代码都是在搭一个舞台，而主角现在终于登场，它就是<strong>updater</strong>. Google的代码架构设计非常好，各部分尽量松耦合。前面介绍升级脚本时，可知有两种类型的脚本，<strong>amend&amp; edify</strong>. 他们各自对应一个updater. 这里，我们主要关注新的edify的updater.</p>
</blockquote>
<h2 id="源码文件"><a href="#源码文件" class="headerlink" title="源码文件"></a>源码文件</h2><p><strong>tree</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── Android.mk</div><div class="line">├── blockimg.c</div><div class="line">├── blockimg.h</div><div class="line">├── install.c</div><div class="line">├── install.h</div><div class="line">├── updater.c</div><div class="line">└── updater.h</div></pre></td></tr></table></figure></p>
<p><strong>入口函数 main</strong></p>
<ol>
<li><strong>处理version 参数</strong></li>
<li><strong>获取命令管道</strong><blockquote>
<p>Set up the pipe for sending commands back to the parent process.</p>
</blockquote>
</li>
<li><strong>读入脚本</strong><blockquote>
<p>mzFindZipEntry(&amp;za, SCRIPT_NAME);</p>
</blockquote>
</li>
<li><strong>注册语句处理函数</strong><blockquote>
<p>Configure edify’s functions.</p>
</blockquote>
</li>
<li>解析脚本命令<blockquote>
<p>Parse the script.</p>
</blockquote>
</li>
<li>执行脚本 <blockquote>
<p>核心函数是 Evaluate。它会调用其他callback函数，而这些callback函数又会调用Evaluate去解析不同的脚本片段。</p>
</blockquote>
</li>
</ol>
<p>主流程的代码非常简单,因为细节隐藏在那些 callback 函数里。</p>
<p><strong>callback函数</strong></p>
<ol>
<li>RegisterBuiltins</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">RegisterBuiltins</span><span class="params">()</span> </span>&#123;</div><div class="line">    RegisterFunction(<span class="string">"ifelse"</span>, IfElseFn);</div><div class="line">    RegisterFunction(<span class="string">"abort"</span>, AbortFn);</div><div class="line">    RegisterFunction(<span class="string">"assert"</span>, AssertFn);</div><div class="line">    RegisterFunction(<span class="string">"concat"</span>, ConcatFn);</div><div class="line">    RegisterFunction(<span class="string">"is_substring"</span>, SubstringFn);</div><div class="line">    RegisterFunction(<span class="string">"stdout"</span>, StdoutFn);</div><div class="line">    RegisterFunction(<span class="string">"sleep"</span>, SleepFn);</div><div class="line">    RegisterFunction(<span class="string">"less_than_int"</span>, LessThanIntFn);</div><div class="line">    RegisterFunction(<span class="string">"greater_than_int"</span>, GreaterThanIntFn);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li><p>RegisterInstallFunctions</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">RegisterInstallFunctions</span><span class="params">()</span> </span>&#123;</div><div class="line">    RegisterFunction(<span class="string">"mount"</span>, MountFn);</div><div class="line">    RegisterFunction(<span class="string">"is_mounted"</span>, IsMountedFn);</div><div class="line">    RegisterFunction(<span class="string">"unmount"</span>, UnmountFn);</div><div class="line">    RegisterFunction(<span class="string">"format"</span>, FormatFn);</div><div class="line">    RegisterFunction(<span class="string">"show_progress"</span>, ShowProgressFn);</div><div class="line">    RegisterFunction(<span class="string">"set_progress"</span>, SetProgressFn);</div><div class="line">    RegisterFunction(<span class="string">"delete"</span>, DeleteFn);</div><div class="line">    RegisterFunction(<span class="string">"delete_recursive"</span>, DeleteFn);</div><div class="line">    RegisterFunction(<span class="string">"package_extract_dir"</span>, PackageExtractDirFn);</div><div class="line">    RegisterFunction(<span class="string">"package_extract_file"</span>, PackageExtractFileFn);</div><div class="line">    RegisterFunction(<span class="string">"symlink"</span>, SymlinkFn);</div><div class="line"></div><div class="line">    <span class="comment">// Usage:</span></div><div class="line">    <span class="comment">//   set_metadata("filename", "key1", "value1", "key2", "value2", ...)</span></div><div class="line">    <span class="comment">// Example:</span></div><div class="line">    <span class="comment">//   set_metadata("/system/bin/netcfg", "uid", 0, "gid", 3003, "mode", 02750, "selabel", "u:object_r:system_file:s0", "capabilities", 0x0);</span></div><div class="line">    RegisterFunction(<span class="string">"set_metadata"</span>, SetMetadataFn);</div><div class="line"></div><div class="line">    <span class="comment">// Usage:</span></div><div class="line">    <span class="comment">//   set_metadata_recursive("dirname", "key1", "value1", "key2", "value2", ...)</span></div><div class="line">    <span class="comment">// Example:</span></div><div class="line">    <span class="comment">//   set_metadata_recursive("/system", "uid", 0, "gid", 0, "fmode", 0644, "dmode", 0755, "selabel", "u:object_r:system_file:s0", "capabilities", 0x0);</span></div><div class="line">    RegisterFunction(<span class="string">"set_metadata_recursive"</span>, SetMetadataFn);</div><div class="line"></div><div class="line">    RegisterFunction(<span class="string">"getprop"</span>, GetPropFn);</div><div class="line">    RegisterFunction(<span class="string">"file_getprop"</span>, FileGetPropFn);</div><div class="line">    RegisterFunction(<span class="string">"write_raw_image"</span>, WriteRawImageFn);</div><div class="line">    RegisterFunction(<span class="string">"write_raw_parameter_image"</span>, WriteRawParameterImageFn);</div><div class="line">    RegisterFunction(<span class="string">"clear_misc_command"</span>, ClearMiscCommandFn);</div><div class="line"></div><div class="line">    RegisterFunction(<span class="string">"apply_patch"</span>, ApplyPatchFn);</div><div class="line">    RegisterFunction(<span class="string">"apply_patch_check"</span>, ApplyPatchCheckFn);</div><div class="line">    RegisterFunction(<span class="string">"apply_patch_space"</span>, ApplyPatchSpaceFn);</div><div class="line"></div><div class="line">    RegisterFunction(<span class="string">"wipe_block_device"</span>, WipeBlockDeviceFn);</div><div class="line"></div><div class="line">    RegisterFunction(<span class="string">"read_file"</span>, ReadFileFn);</div><div class="line">    RegisterFunction(<span class="string">"sha1_check"</span>, Sha1CheckFn);</div><div class="line">    RegisterFunction(<span class="string">"rename"</span>, RenameFn);</div><div class="line"></div><div class="line">    RegisterFunction(<span class="string">"wipe_cache"</span>, WipeCacheFn);</div><div class="line"></div><div class="line">    RegisterFunction(<span class="string">"ui_print"</span>, UIPrintFn);</div><div class="line"></div><div class="line">    RegisterFunction(<span class="string">"run_program"</span>, RunProgramFn);</div><div class="line"></div><div class="line">    RegisterFunction(<span class="string">"reboot_now"</span>, RebootNowFn);</div><div class="line">    RegisterFunction(<span class="string">"get_stage"</span>, GetStageFn);</div><div class="line">    RegisterFunction(<span class="string">"set_stage"</span>, SetStageFn);</div><div class="line"></div><div class="line">    RegisterFunction(<span class="string">"enable_reboot"</span>, EnableRebootFn);</div><div class="line">    RegisterFunction(<span class="string">"tune2fs"</span>, Tune2FsFn);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>RegisterBlockImageFunctions</p>
</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">RegisterBlockImageFunctions</span><span class="params">()</span> </span>&#123;</div><div class="line">    RegisterFunction(<span class="string">"block_image_verify"</span>, BlockImageVerifyFn);</div><div class="line">    RegisterFunction(<span class="string">"block_image_update"</span>, BlockImageUpdateFn);</div><div class="line">    RegisterFunction(<span class="string">"range_sha1"</span>, RangeSha1Fn);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>FinishRegistration<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">FinishRegistration</span><span class="params">()</span> </span>&#123;</div><div class="line">    qsort(fn_table, fn_entries, <span class="keyword">sizeof</span>(NamedFunction), fn_entry_compare);</div><div class="line">&#125;</div></pre></td></tr></table></figure></li>
</ol>
]]></content>
    
    <summary type="html">
    
      Android OTA升级 recovery
    
    </summary>
    
      <category term="android" scheme="https://austinxishou.github.io/categories/android/"/>
    
    
      <category term="android" scheme="https://austinxishou.github.io/tags/android/"/>
    
      <category term="OTA" scheme="https://austinxishou.github.io/tags/OTA/"/>
    
      <category term="recovery" scheme="https://austinxishou.github.io/tags/recovery/"/>
    
  </entry>
  
  <entry>
    <title>Android-OTA(三) recovery 功能解析</title>
    <link href="https://austinxishou.github.io/android/cj2skkok4003d18px2w5vwsck/android/Android-OTA(%E4%B8%89)recovery%E5%8A%9F%E8%83%BD%E8%A7%A3%E6%9E%90/"/>
    <id>https://austinxishou.github.io/android/cj2skkok4003d18px2w5vwsck/android/Android-OTA(三)recovery功能解析/</id>
    <published>2017-04-14T03:45:15.978Z</published>
    <updated>2017-04-14T09:10:58.869Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><strong>recovery 作为系统的恢复工具,有以下几点功能:</strong></p>
<ol>
<li>首先是我们熟悉的恢复工厂设置 –&gt; wipe_data wipe_cache</li>
<li>刷升级包，可以通过sdcard升级，通常说的卡刷，有些还提供ADB sideload升级；</li>
<li>可以进行系统的系统的OTA升级，本质上同手动刷包一样；</li>
</ol>
<p><strong>recovery 与 主系统交互是通过 /cache 目录下的文件:</strong></p>
<ol>
<li>/cache/recovery/command 作为recovery的输入参数,以行为分割</li>
<li>/cache/recovery/log        收集recovery的日志文件</li>
<li>/cache/recovery/intent    输出后续操作指令</li>
</ol>
<p>recovery最后是编译成一个可执行的命令，放在recovery文件系统中的/sbin/recovery；所以我们可以在终端中直接运行该命令，具体的参数如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">--send_intent=anystring - 传递给recovery的信息</div><div class="line">--adbd -adb sideload升级</div><div class="line">--update_package=path - 指定OTA升级包</div><div class="line">--wipe_data - 清楚用户数据并重启</div><div class="line">--wipe_cache - 清楚缓存并重启</div><div class="line">--set_encrypted_filesystem=on|off - 使能或者关闭文件系统加密</div><div class="line">--just_exit - 退出并重启</div></pre></td></tr></table></figure>
<h2 id="recovery生成"><a href="#recovery生成" class="headerlink" title="recovery生成"></a>recovery生成</h2><p>先看一下 build/core/Makefile 的依赖文件:<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$(INSTALLED_RECOVERYIMAGE_TARGET): $(MKBOOTFS) $(MKBOOTIMG) $(MINIGZIP) \</div><div class="line">                $(INSTALLED_RAMDISK_TARGET) \</div><div class="line">                $(INSTALLED_BOOTIMAGE_TARGET) \</div><div class="line">                $(INTERNAL_RECOVERYIMAGE_FILES) \</div><div class="line">                $(recovery_initrc) $(recovery_sepolicy) $(recovery_kernel) \</div><div class="line">                $(INSTALLED_2NDBOOTLOADER_TARGET) \</div><div class="line">                $(recovery_build_prop) $(recovery_resource_deps) \</div><div class="line">                $(recovery_fstab) \</div><div class="line">                $(recovery_fstab_mtd) \</div><div class="line">                $(recovery_fstab_emmc) \</div><div class="line">                $(RECOVERY_INSTALL_OTA_KEYS)</div><div class="line">                $(call build-recoveryimage-target, $@)</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">1．MKBOOTFS, MINIGZIP, MKBOOTIMG，PC端工具软件 </div><div class="line">2．INSTALLED_RAMDISK_TARGET,标准根文件系统 ramdisk.img </div><div class="line">3．INSTALLED_BOOTIMAGE_TARGET,即boot.img,标准内核及标准根文件系统 </div><div class="line">4. recovery_binary, Recovery可执行程序，源码位于：bootable/recovery </div><div class="line">5. recovery_initrc，recovery模式的init.rc, 位于 bootable/recovery/etc/init.rc </div><div class="line">6. recovery_kernel, recovery 模式的kernel, 同标准内核 </div><div class="line">7. INSTALLED_2NDBOOTLOADER_TARGET，我们不用 </div><div class="line">8. recovery_build_prop， recovery 模式的build.prop, 同标准模式 </div><div class="line">9. recovery_resource_deps， recovery 模式使用的res, 位于：recovery/custom/&#123;product_name&#125;/res </div><div class="line">10. RECOVERY_INSTALL_OTA_KEYS, ota 密钥</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">recovery</div><div class="line">├── charger -&gt; /sbin/healthd</div><div class="line">├── data</div><div class="line">├── default.prop</div><div class="line">├── dev</div><div class="line">├── drmboot.ko</div><div class="line">├── etc</div><div class="line">│   ├── recovery.emmc.fstab</div><div class="line">│   └── recovery.fstab</div><div class="line">├── file_contexts</div><div class="line">├── fstab.rk30board.bootmode.emmc</div><div class="line">├── fstab.rk30board.bootmode.unknown</div><div class="line">├── init</div><div class="line">├── init.bootmode.emmc.rc</div><div class="line">├── init.bootmode.unknown.rc</div><div class="line">├── init.rc</div><div class="line">├── oem</div><div class="line">├── proc</div><div class="line">├── property_contexts</div><div class="line">├── res</div><div class="line">│   ├── images</div><div class="line">│   │   ├── erasing_text.png</div><div class="line">│   │   ├── error_text.png</div><div class="line">│   │   ├── font.png</div><div class="line">│   │   ├── icon_error.png</div><div class="line">│   │   ├── icon_installing.png</div><div class="line">│   │   ├── installing_text.png</div><div class="line">│   │   ├── no_command_text.png</div><div class="line">│   │   ├── progress_empty.png</div><div class="line">│   │   ├── progress_fill.png</div><div class="line">│   │   ├── stage_empty.png</div><div class="line">│   │   └── stage_fill.png</div><div class="line">│   └── keys</div><div class="line">├── rk30xxnand_ko.ko</div><div class="line">├── sbin</div><div class="line">│   ├── adbd</div><div class="line">│   ├── busybox</div><div class="line">│   ├── e2fsck</div><div class="line">│   ├── healthd</div><div class="line">│   ├── mkdosfs</div><div class="line">│   ├── mkfs.f2fs</div><div class="line">│   ├── recovery</div><div class="line">│   ├── resize2fs</div><div class="line">│   ├── sh</div><div class="line">│   ├── ueventd -&gt; ../init</div><div class="line">│   └── watchdogd -&gt; ../init</div><div class="line">├── seapp_contexts</div><div class="line">├── selinux_version</div><div class="line">├── sepolicy</div><div class="line">├── service_contexts</div><div class="line">├── sys</div><div class="line">├── system</div><div class="line">├── tmp</div><div class="line">├── ueventd.rc</div><div class="line">└── ueventd.rk30board.rc</div></pre></td></tr></table></figure>
<h2 id="recovery根文件系统"><a href="#recovery根文件系统" class="headerlink" title="recovery根文件系统"></a>recovery根文件系统</h2><p>从bootloader 进入Recovery 模式后，首先也是运行Linux内核，该内核跟普通模式没有区别(减轻了BSP开发者的任务)。区别从执行文件系统开始。 Recovery 模式的细节就隐藏在其根文件系统中。<br>下面，我们就看看进入Recovery 根文件系统都干些啥。</p>
<h3 id="init-rc"><a href="#init-rc" class="headerlink" title="init.rc"></a>init.rc</h3><p>和正常启动一样，内核进入文件系统会执行/init, init 的配置文件就是 /init.rc</p>
<p><strong>主要功能为:</strong></p>
<ol>
<li>设置环境变量;</li>
<li>建立 etc 链接;</li>
<li>挂载文件系统并创建文件夹目录;</li>
<li>启动 recovery主程序;</li>
</ol>
<h2 id="执行流程分析"><a href="#执行流程分析" class="headerlink" title="执行流程分析"></a>执行流程分析</h2><p>在Android源码环境中，recovery的源码主要在bootable/recovery文件下，另外在device目录下，会根据各个设备定制自己的接口以及UI界面，也就是文章后半部分分析的界面定制的内容；</p>
<p>在bootable/recovery目录下，看Android.mk文件的源文件列表：<br><figure class="highlight mk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">LOCAL_SRC_FILES := \</div><div class="line">    adb_install.cpp \</div><div class="line">    asn1_decoder.cpp \</div><div class="line">    bootloader.cpp \</div><div class="line">    device.cpp \</div><div class="line">    fuse_sdcard_provider.c \</div><div class="line">    install.cpp \</div><div class="line">    recovery.cpp \</div><div class="line">    roots.cpp \</div><div class="line">    screen_ui.cpp \</div><div class="line">    ui.cpp \</div><div class="line">    verifier.cpp \</div></pre></td></tr></table></figure></p>
<h3 id="主要执行流程"><a href="#主要执行流程" class="headerlink" title="主要执行流程"></a>主要执行流程</h3><ol>
<li><p>标准错误输出重定向</p>
<blockquote>
<p>将标准输出和标准错误输出重定位到”/tmp/recovery.log”,如果是eng模式，就可以通过adb pull /tmp/recovery.log, 看到当前的log信息，这为我们提供了有效的调试手段。后面还会看到，recovery模式运行完毕后，会将其拷贝到cache分区，以便后续分析。</p>
</blockquote>
</li>
<li><p>miniui初始化</p>
<blockquote>
<p>Recovery 使用了一个简单的基于framebuffer的ui系统，叫miniui,这里，进行了简单的初始化（主要是图形部分以及事件部分），并启动了一个 event 线程用于响应用户按键。 </p>
</blockquote>
</li>
<li><p>解析参数</p>
<blockquote>
<p>从misc 分区以及 CACHE:recovery/command 文件中读入参数，写入到argc, argv ,并且，如果有必要，回写入misc分区。这样，如果recovery没有操作成功（比如，升级还没有结束，就拔电池），系统会一直进入recovery模式。提醒用户继续升级，直到成功。</p>
</blockquote>
</li>
<li><p>设备定制文件初始化</p>
<blockquote>
<p>device_recovery_start() 它給设备制造商提供了一个调用机会，可写入设备相关初始化代码。</p>
</blockquote>
</li>
<li><p>根据命令参数,执行命令</p>
<blockquote>
<p>根据用户提供参数，调用各项功能，比如，安装一个升级包，擦除cache分区, 擦除user data分区，install_package比较复杂。</p>
</blockquote>
</li>
<li><p>完成指令后,等待用户后续指令</p>
<blockquote>
<p>如果前面已经做了某项操作并且成功，则进入重启流程。否则，等待用户选择具体操作。而用户可选操作为： reboot, 安装update.zip，除cache分区, 擦除user data分区,如前所述，只有安装package 比较复杂，其它简单。 </p>
</blockquote>
</li>
<li><p>结束recovery</p>
<blockquote>
<p> finish_recovery(send_intent); 它的功能如下：</p>
<pre><code>1. 将前面定义的intent字符串写入（如果有的话）：CACHE:recovery/command
2. 将 /tmp/recovery.log 复制到 &quot;CACHE:recovery/log&quot;;
3. 清空 misc 分区，这样重启就不会进入recovery模式4)删除command 文件：CACHE:recovery/command;
</code></pre></blockquote>
</li>
</ol>
<h3 id="核心函数-really-install-package"><a href="#核心函数-really-install-package" class="headerlink" title="核心函数 really_install_package"></a>核心函数 really_install_package</h3><ol>
<li><p>更新UI显示</p>
<blockquote>
<p>ui-&gt;Print 更新升级时UI界面显示</p>
</blockquote>
</li>
<li><p>确保所有分区正确挂载</p>
<blockquote>
<p>ensure_path_mounted ,主要是cache分区或者SD分区</p>
</blockquote>
</li>
<li><p>读取update.zip文件</p>
</li>
<li><p>load_keys 装载公钥</p>
<blockquote>
<p>verify_file 注释很清楚,就是签名的验证;</p>
</blockquote>
</li>
<li><p>打开升级包</p>
<blockquote>
<p>mzOpenZipArchive，将相关信息存到 ZipArchive 数据结构中，便于后面处理。</p>
</blockquote>
</li>
<li><p>调用try_update_binary继续执行</p>
<blockquote>
<p>如果升级包中包含脚本文件,则解压执行;主要功能都在这个函数中完成,接下去继续分析;</p>
</blockquote>
</li>
<li><p>复制脚本文件</p>
<blockquote>
<p>将升级包内文件META-INF/com/google/android/update-binary 复制为/tmp/update_binary</p>
</blockquote>
</li>
<li><p>创建新的进程，执行：/tmp/update_binary</p>
<blockquote>
<p>主进程与子进程通过管道进行进程间通信;原进程变成一个服务进程，它提供UI更新服务;<br>包括:更新精度条,打印提示信息,清除缓存,清除显示等</p>
</blockquote>
</li>
<li><p>执行update_binary</p>
<blockquote>
<p>这样，我们又回到了升级包中的文件：META-INF/com/google/android/update-binary</p>
</blockquote>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      Android OTA升级 recovery
    
    </summary>
    
      <category term="android" scheme="https://austinxishou.github.io/categories/android/"/>
    
    
      <category term="android" scheme="https://austinxishou.github.io/tags/android/"/>
    
      <category term="OTA" scheme="https://austinxishou.github.io/tags/OTA/"/>
    
      <category term="recovery" scheme="https://austinxishou.github.io/tags/recovery/"/>
    
  </entry>
  
  <entry>
    <title>Android-OTA(二)ota_from_target_files命令解析</title>
    <link href="https://austinxishou.github.io/android/cj2skkok2003918px8s5serh4/android/Android-OTA(%E4%BA%8C)ota_from_target_files%E5%91%BD%E4%BB%A4%E8%A7%A3%E6%9E%90/"/>
    <id>https://austinxishou.github.io/android/cj2skkok2003918px8s5serh4/android/Android-OTA(二)ota_from_target_files命令解析/</id>
    <published>2017-04-14T03:25:29.926Z</published>
    <updated>2017-04-14T03:42:35.136Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>主要是从一个输入的中间压缩包,生成OTA升级包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">./build/tools/releasetools/ota_from_target_files</div><div class="line"></div><div class="line">Given a target-files zipfile, produces an OTA package that installs</div><div class="line">that build.  An incremental OTA is produced <span class="keyword">if</span> -i is given, otherwise</div><div class="line">a full OTA is produced.</div><div class="line"></div><div class="line">Usage:  ota_from_target_files [flags] input_target_files output_ota_package</div></pre></td></tr></table></figure>
<p>常用的参数:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">-k 指定签名文件,默认为<span class="string">"build/target/product/security/testkey"</span></div><div class="line">-i 指定源文件</div><div class="line">-p 指定编译主机可执行文件路径</div><div class="line">-v 冗余信息打印</div><div class="line">-w 清除用户数据</div><div class="line"><span class="_">-e</span> 定义额外运行的脚本</div><div class="line">-m 定义采用的脚本格式，目前有两种，amend &amp; edify, 其中amend为较老的格式。</div><div class="line"><span class="_">-s</span> 定义额外运行的脚本的路径</div></pre></td></tr></table></figure></p>
<h2 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h2><h3 id="入口：main"><a href="#入口：main" class="headerlink" title="入口：main"></a>入口：main</h3><p>按照python惯例，单独执行的代码执行从<strong>main</strong>开始：</p>
<ol>
<li>将用户设定的 Option 存入 OPTIONS 变量中。</li>
<li>解开输入包</li>
<li>设定输出文件，如果要签名（our case）,则还需要一个临时输出文件。</li>
<li>根据参数，调用全量包或差分包创建 ZIP 创建函数。</li>
<li>WriteFullOTAPackage 全量包生成</li>
<li></li>
</ol>
<h3 id="主要函数-WriteFullOTAPackage"><a href="#主要函数-WriteFullOTAPackage" class="headerlink" title="主要函数 WriteFullOTAPackage"></a>主要函数 WriteFullOTAPackage</h3><ol>
<li>获得脚本生成器，他们的实现见脚本 edify_generator.py 等</li>
<li>获得一些环境变量，来自android 环境变量。 </li>
<li>创建连接 </li>
<li>MakeRecoveryPatch : 在输出 ZIP包中生成一个patch</li>
<li>在输出 ZIP包中生成一个脚本：recovery/etc/install-recovery.sh , 它最后会位于system/etc/install-recovery.sh</li>
<li>设置 system 目录下文件的权限及属主等。</li>
<li>script.WriteRawImage(“boot”, “boot.img”) 在脚本中增加语句，将 boot.img 写到 boot 分区。 </li>
<li>将前面生成的脚本输出到：META-INF/com/google/android/updater-script （对于edify）</li>
</ol>
]]></content>
    
    <summary type="html">
    
      Android OTA升级 updater updater-script
    
    </summary>
    
      <category term="android" scheme="https://austinxishou.github.io/categories/android/"/>
    
    
      <category term="android" scheme="https://austinxishou.github.io/tags/android/"/>
    
      <category term="OTA" scheme="https://austinxishou.github.io/tags/OTA/"/>
    
  </entry>
  
  <entry>
    <title>Android Studio中使用ButterKnife注解框架</title>
    <link href="https://austinxishou.github.io/android/cj2skkok5003g18px26ceud22/android/AndroidStudio%E4%B8%AD%E4%BD%BF%E7%94%A8ButterKnife%E6%B3%A8%E8%A7%A3%E6%A1%86%E6%9E%B6/"/>
    <id>https://austinxishou.github.io/android/cj2skkok5003g18px26ceud22/android/AndroidStudio中使用ButterKnife注解框架/</id>
    <published>2017-04-13T03:38:02.387Z</published>
    <updated>2017-04-13T05:56:30.978Z</updated>
    
    <content type="html"><![CDATA[<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><blockquote>
<p>比较复杂的布局文件中，会定义众多的view，在activity中使用findViewById逐个初始化，也是挺繁琐的一项工作，喜欢偷懒的程序员，一定会喜欢ButterKnife的，它大大的简化了这一步骤，只需要鼠标点击三下就OK了。<br>下面是android ButterKnife Zelezny的github上的一个动态使用流程图： </p>
</blockquote>
<p><img src="/images/android-butterknife/butterknife.gif" alt="butterknife"></p>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><h3 id="安装ButterKnife插件"><a href="#安装ButterKnife插件" class="headerlink" title="安装ButterKnife插件"></a>安装ButterKnife插件</h3><ol>
<li><strong>File –&gt; Settings –&gt; Plugins –&gt; Browse repositories</strong> <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/android-butterknife/butterknife-install1.jpg" alt="插件安装" title="">
                </div>
                <div class="image-caption">插件安装</div>
            </figure></li>
<li><strong>查找ButterKnife插件，安装</strong> <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/android-butterknife/butterknife-install2.jpg" alt="查找ButterKnife插件" title="">
                </div>
                <div class="image-caption">查找ButterKnife插件</div>
            </figure></li>
<li><strong>重启Android Studio</strong></li>
</ol>
<h3 id="使用ButterKnife插件"><a href="#使用ButterKnife插件" class="headerlink" title="使用ButterKnife插件"></a>使用ButterKnife插件</h3><ol>
<li><p><strong>添加jar包</strong></p>
<blockquote>
<p>右键Module，Open Module Settings<br>切换到Dependencies，点击右侧的“+”，选择“Library Dependency” </p>
</blockquote>
<p> <img src="/images/android-butterknife/addDependency.jpg" alt="addDependency"> </p>
<blockquote>
<p>搜索ButterKnife，添加jar包 </p>
</blockquote>
<p> <img src="/images/android-butterknife/addDependency2.jpg" alt="addDependency"></p>
</li>
<li><p><strong>生成注解</strong></p>
<blockquote>
<p>右键layout的ID，点击“Generate” </p>
</blockquote>
<p> <img src="/images/android-butterknife/generate.jpg" alt="Generate"> </p>
<blockquote>
<p>选择“Generate Butterknife Injections” </p>
</blockquote>
<p> <img src="/images/android-butterknife/generate2.jpg" alt="Generate"> </p>
<blockquote>
<p>生成注解 </p>
</blockquote>
<p> <img src="/images/android-butterknife/generate3.jpg" alt="Generate"></p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      Android butterknife
    
    </summary>
    
      <category term="android" scheme="https://austinxishou.github.io/categories/android/"/>
    
    
      <category term="android" scheme="https://austinxishou.github.io/tags/android/"/>
    
      <category term="butterknife" scheme="https://austinxishou.github.io/tags/butterknife/"/>
    
  </entry>
  
  <entry>
    <title>Android工程编译错误集锦</title>
    <link href="https://austinxishou.github.io/android/cj2skkokg004518pxa9hfheah/android/Android%E5%B7%A5%E7%A8%8B%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%E9%9B%86%E9%94%A6/"/>
    <id>https://austinxishou.github.io/android/cj2skkokg004518pxa9hfheah/android/Android工程编译错误集锦/</id>
    <published>2017-04-13T01:48:54.373Z</published>
    <updated>2017-05-05T02:10:20.568Z</updated>
    
    <content type="html"><![CDATA[<h2 id="工程编译类"><a href="#工程编译类" class="headerlink" title="工程编译类"></a>工程编译类</h2><h3 id="Gradle-错误-Failed-to-complete-Gradle-execution"><a href="#Gradle-错误-Failed-to-complete-Gradle-execution" class="headerlink" title="Gradle 错误 Failed to complete Gradle execution."></a>Gradle 错误 Failed to complete Gradle execution.</h3><p><strong>问题描述:</strong></p>
<blockquote>
<p>更新Android studio 2.3后,出现Gradle 错误</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Error:Failed to complete Gradle execution.</div><div class="line">Cause:</div><div class="line">Could not create parent directory for lock file C:\Users\Administrator\.gradle\wrapper\dists\D:AustinDevtoolsgradlegradle-2.10-all\dn4qn6r39kukmjs5vguem1ak2\D:AustinDevtoolsgradlegradle-2.10-all.zip.lck</div></pre></td></tr></table></figure>
<p><strong>解决方法</strong></p>
<blockquote>
<p>找到工程的build.gradle,修改classpath ‘com.android.tools.build:gradle:2.1.0’为classpath ‘com.android.tools.build:gradle:2.3.0’</p>
</blockquote>
<h3 id="AAPT-err-libpng-error-Not-a-PNG-file"><a href="#AAPT-err-libpng-error-Not-a-PNG-file" class="headerlink" title="AAPT err: libpng error: Not a PNG file"></a>AAPT err: libpng error: Not a PNG file</h3><p><strong> 问题描述 </strong></p>
<blockquote>
<p>Android Studio AAPT err: libpng error: Not a PNG file</p>
</blockquote>
<p><strong> 问题说明: </strong></p>
<blockquote>
<p>问题的根源是,项目的png文件已经通过其他工具提前优化过,但是AAPT工具在编译工程时再次进行优化,<br>但是不能识别该图片之前使用的是什么工具,所以编译出错;解决办法只需要把aapt的图片编译优化关掉即可</p>
</blockquote>
<p><strong> 解决方法 </strong></p>
<blockquote>
<p>aaptOptions.cruncherEnabled = false</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">25</span></div><div class="line">    buildToolsVersion <span class="string">"25.0.2"</span></div><div class="line">    aaptOptions.cruncherEnabled = <span class="keyword">false</span></div><div class="line">    useLibrary <span class="string">'org.apache.http.legacy'</span></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.Mankewan.manke"</span></div><div class="line">        minSdkVersion <span class="number">15</span></div><div class="line">        targetSdkVersion <span class="number">25</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            <span class="function">minifyEnabled <span class="keyword">false</span></span></div><div class="line">            proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.txt'</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Gradle-Could-not-create-parent-directory-for-lock-file"><a href="#Gradle-Could-not-create-parent-directory-for-lock-file" class="headerlink" title="Gradle Could not create parent directory for lock file"></a>Gradle Could not create parent directory for lock file</h3><p><strong>问题描述</strong><br>Error:Could not create parent directory for lock file C:\Users\Administrator.gradle\wrapper\dists\D:AustinDevtoolsgradlegradle-3.4.1-all…gradlegradle-3.4.1-all.zip.lck</p>
<p><strong>解决方法</strong></p>
<blockquote>
<p>在Android studio 设置中,把gradle设置成 Use local gradle distribution</p>
</blockquote>
<h3 id="Android-支持库"><a href="#Android-支持库" class="headerlink" title="Android 支持库"></a>Android 支持库</h3><p><strong>问题描述</strong></p>
<blockquote>
<p>Error:Could not find method compile() for arguments [com.android.support:appcompat-v7:19.1.0] on root project ‘Aaaa’.</p>
<p>Please install the Android Support Repository from the Android SDK Manager.</p>
</blockquote>
<p><strong>问题说明</strong><br>Android的支持库位置声明错误,应该放在模块的gradle文件中,而不是顶层的gradle文件中</p>
<blockquote>
<p>You’ve put your dependencies block in the wrong build.gradle file. Instead of the top-level build file, put it in your module’s build file instead.</p>
</blockquote>
<p><strong>解决方法</strong><br>在模块的gradle文件中,添加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">    compile <span class="string">'com.android.support:appcompat-v7:19.1.0'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Android程序报错程序包org-apache-http不存在问题的解决方法"><a href="#Android程序报错程序包org-apache-http不存在问题的解决方法" class="headerlink" title="Android程序报错程序包org.apache.http不存在问题的解决方法"></a>Android程序报错程序包org.apache.http不存在问题的解决方法</h3><p><strong>问题描述</strong></p>
<blockquote>
<p>Android程序报错程序包org.apache.http不存在问题的解决方法</p>
</blockquote>
<p><strong>问题说明</strong></p>
<blockquote>
<p>Android 6.0已经不支持HttpClient” </p>
</blockquote>
<p><strong>解决方法</strong></p>
<blockquote>
<p>Android 6.0（api 23）已经不支持HttpClient了，在build.gradle中 加入 useLibrary ‘org.apache.http.legacy’就可以</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">25</span></div><div class="line">    buildToolsVersion <span class="string">"25.0.2"</span></div><div class="line">    aaptOptions.cruncherEnabled = <span class="keyword">false</span></div><div class="line">    useLibrary <span class="string">'org.apache.http.legacy'</span></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.Mankewan.manke"</span></div><div class="line">        minSdkVersion <span class="number">15</span></div><div class="line">        targetSdkVersion <span class="number">25</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            <span class="function">minifyEnabled <span class="keyword">false</span></span></div><div class="line">            proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.txt'</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Python-工作环境错误"><a href="#Python-工作环境错误" class="headerlink" title="Python 工作环境错误"></a>Python 工作环境错误</h3><p><strong>问题描述:</strong> </p>
<blockquote>
<p>最近在写一个Python程序的时候，使用from selenium import webdriver,在run的时候却出现ImportError: cannot import name webdriver的提示，但是在Python IDLE里面跑却没有错误。很是疑惑，谷歌一下才发现有人已经在stackoverflow里面提出类似问题了，原因如下，在当前目录有个名叫selenium的文件，Python会先导入这个文件，然后再导入标准库里面的selenium.py</p>
</blockquote>
<p><strong>解决方法</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">##可以使用</span></div><div class="line"><span class="keyword">import</span> selenium </div><div class="line"><span class="keyword">print</span> selenium.__file__  </div><div class="line"><span class="comment">##去看打印出的文件路径，如果不是下面类似的C:\Python27\lib\site-packages\selenium-2.31.0-py2.7.egg\selenium\__init__.pyc，需要把当前目录下的文件删除或者重命名。</span></div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      Android工程编译错误集锦 Gradle error
    
    </summary>
    
      <category term="android" scheme="https://austinxishou.github.io/categories/android/"/>
    
    
      <category term="android gradle aapt" scheme="https://austinxishou.github.io/tags/android-gradle-aapt/"/>
    
  </entry>
  
  <entry>
    <title>Android OTA升级测试以及问题汇总</title>
    <link href="https://austinxishou.github.io/android/cj2skkojx003018pxnhrg6x4t/android/Android%20OTA%E5%8D%87%E7%BA%A7%E6%B5%8B%E8%AF%95%E4%BB%A5%E5%8F%8A%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <id>https://austinxishou.github.io/android/cj2skkojx003018pxnhrg6x4t/android/Android OTA升级测试以及问题汇总/</id>
    <published>2017-04-12T07:13:17.361Z</published>
    <updated>2017-04-12T07:13:17.382Z</updated>
    
    <content type="html"><![CDATA[<h2 id="OTA包本地升级操作步骤"><a href="#OTA包本地升级操作步骤" class="headerlink" title="OTA包本地升级操作步骤"></a>OTA包本地升级操作步骤</h2>]]></content>
    
    <summary type="html">
    
      Android OTA 升级测试以及问题汇总
    
    </summary>
    
      <category term="android" scheme="https://austinxishou.github.io/categories/android/"/>
    
    
      <category term="android" scheme="https://austinxishou.github.io/tags/android/"/>
    
      <category term="OTA" scheme="https://austinxishou.github.io/tags/OTA/"/>
    
  </entry>
  
  <entry>
    <title>Android优化OTA包大小和开机启动时间</title>
    <link href="https://austinxishou.github.io/android/cj2skkok8003n18pxwoc57o24/android/Android%E4%BC%98%E5%8C%96OTA%E5%8C%85%E5%A4%A7%E5%B0%8F%E5%92%8C%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E6%97%B6%E9%97%B4/"/>
    <id>https://austinxishou.github.io/android/cj2skkok8003n18pxwoc57o24/android/Android优化OTA包大小和开机启动时间/</id>
    <published>2017-04-12T06:21:18.535Z</published>
    <updated>2017-04-12T06:45:12.227Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题说明"><a href="#问题说明" class="headerlink" title="问题说明"></a>问题说明</h2><p>在Android 升级到 5.0 (Lollipop/L)之后，虚拟机实例换成了ART，这加快了应用运行时的速度，但是在系统升级中却引入了一些不便之处：</p>
<ol>
<li>在生成升级包时，因为ART采用了预编译优化功能，会把 APK 及JAR等通过dex2ota预编译成odex文件，这样极大的增加了升级包的大小，动辄上G的大小不方便用户的下载和网络的传播；</li>
<li>如果不进行预编译优化，则这部分操作会转移到刷机完成后第一次开机时间，十几分钟甚至更多的时间，让用户不确认是否升级出问题；</li>
</ol>
<h2 id="预编译配置-兼顾大小和时间"><a href="#预编译配置-兼顾大小和时间" class="headerlink" title="预编译配置-兼顾大小和时间"></a>预编译配置-兼顾大小和时间</h2><p>上述问题，Android系统设计者，早已考虑周全，尤其是针对存储空间有限的设备，提供了丰富的编译配置选项，方便开发者根据自己实际情况进行针对性的配置修改；</p>
<p>下面就针对这些配置选项进行说明和标记，方便后续开发人员参考；</p>
<h3 id="打开odex编译优化"><a href="#打开odex编译优化" class="headerlink" title="打开odex编译优化"></a>打开odex编译优化</h3><p>首先，可以完全关闭预编译优化功能，跟dalvik虚拟机时代的升级包相同：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">product BoardConfig.mk 文件中，添加编译变量： WITH_DEXPREOPT := true</div></pre></td></tr></table></figure></p>
<p>当然，这样的结果就是升级包小了，第一次开机时间极其慢；</p>
<h3 id="预编译的包不进行优化"><a href="#预编译的包不进行优化" class="headerlink" title="预编译的包不进行优化"></a>预编译的包不进行优化</h3><p>预编译的包是指那些在模块编译文件中指定为：include $(BUILD_PREBUILT) 的APK和JAR包等，这在升级包中占了一大部门；<br>DONT_DEXPREOPT_PREBUILTS  变量就可以配置这部门代码是否进行预编译优化；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DONT_DEXPREOPT_PREBUILTS := true 后，编译系统将会阻止 prebuild 包的odex优化；</div></pre></td></tr></table></figure></p>
<h3 id="只进行BOOT-img-优化"><a href="#只进行BOOT-img-优化" class="headerlink" title="只进行BOOT.img 优化"></a>只进行BOOT.img 优化</h3><p>Android启动过程中，boot.img包含了大部分底层系统的启动和初始化，主要包含在boot.art文件中；<br>使用 WITH_DEXPREOPT_BOOT_IMG_ONLY 编译变量，可以控制编译系统只进行boot.img的优化；<br>使能该变量后，将会大量节省system分区的大小，但同时意味着所有的app都需要在第一次重启的时候进行odex优化；</p>
<p>所以最好是通过 DONT_DEXPREOPT_PREBUILTS 进行更精确的控制；</p>
<h3 id="LOCAL-DEX-PREOPT-编译变量使用"><a href="#LOCAL-DEX-PREOPT-编译变量使用" class="headerlink" title="LOCAL_DEX_PREOPT 编译变量使用"></a>LOCAL_DEX_PREOPT 编译变量使用</h3><p>每个app应用，可以通过该编译变量进行控制是否进行odex优化；<br>在 app’s Android.mk，进行变量赋值 LOCAL_DEX_PREOPT := false</p>
<h3 id="PRODUCT-DEXPREOPT-编译变量使用"><a href="#PRODUCT-DEXPREOPT-编译变量使用" class="headerlink" title="PRODUCT_DEXPREOPT 编译变量使用"></a>PRODUCT_DEX<em>PREOPT</em> 编译变量使用</h3><p>在 post-L 发行版本之后，添加了这个系列的编译变量，进行更深入控制预编译的优化；</p>
<ol>
<li>PRODUCT_DEX_PREOPT_BOOT_FLAGS          传递参数给 dex2oat 命令，控制boot.img的编译</li>
<li>PRODUCT_DEX_PREOPT_DEFAULT_FLAGS     传递默认参数给 dex2oat 命令，控制除了 boot.img的编译，即jar包和apk文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(call add-product-dex-preopt-module-config,services,--compiler-filter=space)</div></pre></td></tr></table></figure>
</li>
</ol>
<p>或者 直接关闭模块的预编译优化<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(call add-product-dex-preopt-module-config,Calculator,disable)</div></pre></td></tr></table></figure></p>
<h3 id="Android-7-0-之后的优化"><a href="#Android-7-0-之后的优化" class="headerlink" title="Android 7.0 之后的优化"></a>Android 7.0 之后的优化</h3><p>7.0后，系统可以分为A/B两个分区，OTA升级以及APK的优化不影响用户前台的正常使用，这样既减小了升级包的大小，又提升了第一次开机速度；</p>
<h3 id="预加载类文件"><a href="#预加载类文件" class="headerlink" title="预加载类文件"></a>预加载类文件</h3><p>预加载类会由zygote统一初始化，这样使后续使用到这些类的app开启速度加快；但是预加载类的使用在实际项目中要非常注意，需要仔细评估后确认权衡值，太多的预加载类会导致一些不常用的类消耗宝贵的内存资源，相反则会导致常用的类在不同应用中独立加载，各自有一个备份，既减慢应用开启速度，也是浪费内存；</p>
<p>预加载类的定义列表，默认放置在 frameworks/base/preloaded-classes ，也可以在产品的devic.mk中添加自行定义的预加载列表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PRODUCT_COPY_FILES += &lt;filename&gt;:system/etc/preloaded-classes</div></pre></td></tr></table></figure></p>
<h3 id="编译类列表"><a href="#编译类列表" class="headerlink" title="编译类列表"></a>编译类列表</h3><p>结合 PRODUCT_DEX_PREOPT_BOOT_FLAGS 和 compiled-classes 可以控制编译系统是否在预编译优化中编译这些类；<br>不过上述列表只能定义启动类的一个子集，适合用于那些存储空间非常有限，不能全局优化编译整个boot.img 分区的设备，所以对我们来说并不适合；</p>
]]></content>
    
    <summary type="html">
    
      Android 优化OTA包大小和开机启动时间 升级包大小优化 升级开机时间优化 odex
    
    </summary>
    
      <category term="android" scheme="https://austinxishou.github.io/categories/android/"/>
    
    
      <category term="android" scheme="https://austinxishou.github.io/tags/android/"/>
    
      <category term="odex" scheme="https://austinxishou.github.io/tags/odex/"/>
    
  </entry>
  
  <entry>
    <title>Android-OTA(四)Recovery二次开发</title>
    <link href="https://austinxishou.github.io/android/cj2skkoka003r18pxxgpxczpi/android/Android-OTA(%E5%9B%9B)Recovery%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91/"/>
    <id>https://austinxishou.github.io/android/cj2skkoka003r18pxxgpxczpi/android/Android-OTA(四)Recovery二次开发/</id>
    <published>2017-04-12T06:17:58.664Z</published>
    <updated>2017-04-17T02:06:25.241Z</updated>
    
    <content type="html"><![CDATA[<h3 id="main-函数"><a href="#main-函数" class="headerlink" title="main 函数"></a>main 函数</h3><p>从main入口函数分析recovery的主要源码：</p>
<p><strong>输出重定向</strong></p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">    redirect_stdio(TEMPORARY_LOG_FILE);</div><div class="line">    //redirect log to serial output</div><div class="line">#ifdef LogToSerial</div><div class="line">    freopen(&quot;/dev/ttyFIQ0&quot;, &quot;a&quot;, stdout); setbuf(stdout, NULL);</div><div class="line">    freopen(&quot;/dev/ttyFIQ0&quot;, &quot;a&quot;, stderr); setbuf(stderr, NULL);</div><div class="line">#endif</div></pre></td></tr></table></figure>
<p>这部分代码很容易理解，主要作用是输出log到/tem/recovery.log文件中</p>
<p><strong>执行adb sideload分支</strong></p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if (argc == 2 &amp;&amp; strcmp(argv[1], &quot;--adbd&quot;) == 0) &#123;</div><div class="line">    adb_main(0, DEFAULT_ADB_PORT);</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>判断命令行参数是否为–adbd，并执行adb_main函数，这部分代码在后续adb_install.cpp中分析；</p>
<p><strong>填充fstab结构体</strong></p>
<hr>
<p>在main函数中调用 load_volume_table()，读取/etc/recovery.emmc.fstab文件内容，并填充fstab结构体，但是并没有执行挂载操作：<br>load_volume_table函数在roots.cpp文件中，也是很容易理解：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">void load_volume_table()</div><div class="line">&#123;</div><div class="line">	...</div><div class="line">	int emmcState = getEmmcState();//判断是否为emmc设备</div><div class="line">    if(emmcState) &#123;</div><div class="line">		fstab = fs_mgr_read_fstab(&quot;/etc/recovery.emmc.fstab&quot;);</div><div class="line">	&#125;else &#123;</div><div class="line">    	fstab = fs_mgr_read_fstab(&quot;/etc/recovery.fstab&quot;);</div><div class="line">	&#125;</div><div class="line">	...</div><div class="line">	//读取文件中每个条目内容，填充fstab结构体</div><div class="line">    ret = fs_mgr_add_entry(fstab, &quot;/tmp&quot;, &quot;ramdisk&quot;, &quot;ramdisk&quot;);</div><div class="line">	...</div><div class="line">	//日志打印fstable信息</div><div class="line">    printf(&quot;recovery filesystem table\n&quot;);</div><div class="line">    printf(&quot;=========================\n&quot;);</div><div class="line">    for (i = 0; i &lt; fstab-&gt;num_entries; ++i) &#123;</div><div class="line">        Volume* v = &amp;fstab-&gt;recs[i];</div><div class="line">        printf(&quot;  %d %s %s %s %lld\n&quot;, i, v-&gt;mount_point, v-&gt;fs_type,</div><div class="line">               v-&gt;blk_device, v-&gt;length);</div><div class="line">    &#125;</div><div class="line">    printf(&quot;\n&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>读取控制参数</strong><br>recovery 和 bootloader 必须通过内存的一个特定分区，才能进行相互的通信，这个分区一般是/misc；<br>对应的信息数据结构体为bootloader_message；<br>参照源码中bootloader_message  的注释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">struct bootloader_message &#123;</div><div class="line">    char command[32];//bootloader 启动时读取改数据，决定是否进入recovery模式</div><div class="line">    char status[32];//由bootloader进行更新，标识升级的结果；</div><div class="line">    char recovery[768];//由Android系统进行写入，recovery从中读取信息；</div><div class="line">    char stage[32];</div><div class="line">    char reserved[224];</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>recovery 根据命令行参数，再从/misc分区中解析出对应的参数，进行后续的操作，具体的调用函数为get_args(&amp;argc, &amp;argv);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">static void</div><div class="line">get_args(int *argc, char ***argv) &#123;</div><div class="line">    struct bootloader_message boot;//参数结构体</div><div class="line">    memset(&amp;boot, 0, sizeof(boot));</div><div class="line">    get_bootloader_message(&amp;boot);  // 具体的读取信息的函数，可能为空的情况</div><div class="line">    stage = strndup(boot.stage, sizeof(boot.stage));</div><div class="line">	...</div><div class="line">	</div><div class="line">	 // 如果上述情况为空，则从/cache/recovery/command获取参数，其中COMMAND_FILE=/cache/recovery/command</div><div class="line">    if (*argc &lt;= 1) &#123;</div><div class="line">        FILE *fp = fopen_path(COMMAND_FILE, &quot;r&quot;);</div><div class="line">        if (fp != NULL) &#123;</div><div class="line">            char *token;</div><div class="line">            char *argv0 = (*argv)[0];</div><div class="line">            *argv = (char **) malloc(sizeof(char *) * MAX_ARGS);</div><div class="line">            (*argv)[0] = argv0;  // use the same program name</div><div class="line"></div><div class="line">            char buf[MAX_ARG_LENGTH];</div><div class="line">            for (*argc = 1; *argc &lt; MAX_ARGS; ++*argc) &#123;</div><div class="line">                if (!fgets(buf, sizeof(buf), fp)) break;</div><div class="line">                token = strtok(buf, &quot;\r\n&quot;);</div><div class="line">                if (token != NULL) &#123;</div><div class="line">                    (*argv)[*argc] = strdup(token);  // Strip newline.</div><div class="line">                &#125; else &#123;</div><div class="line">                    --*argc;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            check_and_fclose(fp, COMMAND_FILE);</div><div class="line">            LOGI(&quot;Got arguments from %s\n&quot;, COMMAND_FILE);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">	</div><div class="line">	//把从/cache/recovery/command获取参数重新写回到/misc分区</div><div class="line">    // --&gt; write the arguments we have back into the bootloader control block</div><div class="line">    // always boot into recovery after this (until finish_recovery() is called)</div><div class="line">    strlcpy(boot.command, &quot;boot-recovery&quot;, sizeof(boot.command));</div><div class="line">    strlcpy(boot.recovery, &quot;recovery\n&quot;, sizeof(boot.recovery));</div><div class="line">    int i;</div><div class="line">    for (i = 1; i &lt; *argc; ++i) &#123;</div><div class="line">        strlcat(boot.recovery, (*argv)[i], sizeof(boot.recovery));</div><div class="line">        strlcat(boot.recovery, &quot;\n&quot;, sizeof(boot.recovery));</div><div class="line">    &#125;</div><div class="line">    set_bootloader_message(&amp;boot);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>解析命令行参数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">  while ((arg = getopt_long(argc, argv, &quot;&quot;, OPTIONS, NULL)) != -1) &#123;</div><div class="line">      switch (arg) &#123;</div><div class="line">      case &apos;f&apos;: factory_mode = optarg; bFactoryMode = true; break;</div><div class="line">      case &apos;i&apos;: send_intent = optarg; break;</div><div class="line">      case &apos;u&apos;: update_package = optarg; break;</div><div class="line">      case &apos;w&apos;: should_wipe_data = true; break;</div><div class="line">case &apos;k&apos;:  update_rkimage = optarg;break;</div><div class="line">      case &apos;c&apos;: should_wipe_cache = true; break;</div><div class="line">      case &apos;t&apos;: show_text = true; break;</div><div class="line">      case &apos;s&apos;: sideload = true; break;</div><div class="line">      case &apos;a&apos;: sideload = true; sideload_auto_reboot = true; break;</div><div class="line">      case &apos;x&apos;: just_exit = true; break;</div><div class="line">      case &apos;l&apos;: locale = optarg; break;</div><div class="line">      case &apos;g&apos;: &#123;</div><div class="line">          if (stage == NULL || *stage == &apos;\0&apos;) &#123;</div><div class="line">              char buffer[20] = &quot;1/&quot;;</div><div class="line">              strncat(buffer, optarg, sizeof(buffer)-3);</div><div class="line">              stage = strdup(buffer);</div><div class="line">          &#125;</div><div class="line">          break;</div><div class="line">      &#125;</div><div class="line">      case &apos;f&apos;+&apos;w&apos;: //fw_update</div><div class="line">          if((optarg)&amp;&amp;(!sdboot_update_package))&#123;</div><div class="line">          sdboot_update_package = strdup(optarg);</div><div class="line">          &#125;</div><div class="line">          break;</div><div class="line">      case &apos;d&apos;: //demo_copy</div><div class="line">          if((optarg)&amp;&amp;(! demo_copy_path))&#123;</div><div class="line">              demo_copy_path = strdup(optarg);</div><div class="line">          &#125;</div><div class="line">          break;</div><div class="line">      case &apos;p&apos;: shutdown_after = true; break;</div><div class="line">      case &apos;r&apos;: reason = optarg; break;</div><div class="line">      case &apos;w&apos;+&apos;a&apos;: &#123; should_wipe_all = should_wipe_data = should_wipe_cache = true;show_text = true;&#125; break;</div><div class="line">      case &apos;?&apos;:</div><div class="line">          LOGE(&quot;Invalid command argument\n&quot;);</div><div class="line">          continue;</div><div class="line">      &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>这部分代码很简单，就是通过getopt_long进行命令行参数的解析并赋值；</p>
<p><strong>显示界面和功能选项</strong></p>
<p>接下来就是创建device，显示对应UI界面和功能选项；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">   Device* device = make_device();//可以自己实现一个设备</div><div class="line">   ui = device-&gt;GetUI();</div><div class="line">   gCurrentUI = ui;//赋值ui界面</div><div class="line"></div><div class="line">   ui-&gt;SetLocale(locale);//获取归属地信息</div><div class="line">   ui-&gt;Init();//初始化，可以重载，在init中实现相应功能</div><div class="line">ui-&gt;SetStage(st_cur, st_max);</div><div class="line">ui-&gt;SetBackground(RecoveryUI::NONE);</div></pre></td></tr></table></figure>
<p><strong>进行分区挂载操作</strong><br>ensure_path_mounted<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">int ensure_path_mounted(const char* path) &#123;</div><div class="line">	...</div><div class="line">    Volume* v = volume_for_path(path);//根据路径名获取分区信息</div><div class="line">	...</div><div class="line">    int result;</div><div class="line">    result = scan_mounted_volumes();</div><div class="line"></div><div class="line">    const MountedVolume* mv =</div><div class="line">        find_mounted_volume_by_mount_point(v-&gt;mount_point);//根据挂载点，获取已挂载分区的信息，如果不为空，说明已经成功挂载</div><div class="line">    if (mv) &#123;</div><div class="line">        // volume is already mounted</div><div class="line">        return 0;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    result = mkdir(v-&gt;mount_point, 0755);  // 创建对应目录，确保目录存在，也有可能目录已经存在</div><div class="line">    if (result!=0)</div><div class="line">    &#123;</div><div class="line">		printf(&quot;failed to create %s dir,err=%s!\n&quot;,v-&gt;mount_point,strerror(errno));</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	// 根据文件系统类型，执行mount操作</div><div class="line">    if (strcmp(v-&gt;fs_type, &quot;yaffs2&quot;) == 0) &#123;</div><div class="line">        // mount an MTD partition as a YAFFS2 filesystem.</div><div class="line">        mtd_scan_partitions();</div><div class="line">        const MtdPartition* partition;</div><div class="line">        partition = mtd_find_partition_by_name(v-&gt;blk_device);</div><div class="line">        if (partition == NULL) &#123;</div><div class="line">            LOGE(&quot;failed to find \&quot;%s\&quot; partition to mount at \&quot;%s\&quot;\n&quot;,</div><div class="line">                 v-&gt;blk_device, v-&gt;mount_point);</div><div class="line">            return -1;</div><div class="line">        &#125;</div><div class="line">        return mtd_mount_partition(partition, v-&gt;mount_point, v-&gt;fs_type, 0);</div><div class="line">    &#125; else if (strcmp(v-&gt;fs_type, &quot;ext4&quot;) == 0 ||</div><div class="line">               strcmp(v-&gt;fs_type, &quot;ext3&quot;) == 0) &#123;</div><div class="line">        result = mount(v-&gt;blk_device, v-&gt;mount_point, v-&gt;fs_type,</div><div class="line">                       MS_NOATIME | MS_NODEV | MS_NODIRATIME, &quot;&quot;);</div><div class="line">        if (result == 0) return 0;</div><div class="line"></div><div class="line">        LOGE(&quot;failed to mount %s %s (%s)\n&quot;, v-&gt;mount_point, v-&gt;blk_device, strerror(errno));</div><div class="line">        return -1;</div><div class="line">    &#125; else if (strcmp(v-&gt;fs_type, &quot;vfat&quot;) == 0) &#123;</div><div class="line">        result = mount(v-&gt;blk_device, v-&gt;mount_point, v-&gt;fs_type,</div><div class="line">                       MS_NOATIME | MS_NODEV | MS_NODIRATIME, &quot;shortname=mixed,utf8&quot;);</div><div class="line">        if (result == 0) return 0;</div><div class="line"></div><div class="line">        LOGW(&quot;trying mount %s to ntfs\n&quot;, v-&gt;blk_device);</div><div class="line">		result = mount(v-&gt;blk_device, v-&gt;mount_point, &quot;ntfs&quot;,</div><div class="line">						   MS_NOATIME | MS_NODEV | MS_NODIRATIME, &quot;&quot;);</div><div class="line">		if (result == 0) return 0;</div><div class="line"></div><div class="line">		char *sec_dev = v-&gt;fs_options;</div><div class="line">		if(sec_dev != NULL) &#123;</div><div class="line">			char *temp = strchr(sec_dev, &apos;,&apos;);</div><div class="line">			if(temp) &#123;</div><div class="line">				temp[0] = &apos;\0&apos;;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			result = mount(sec_dev, v-&gt;mount_point, v-&gt;fs_type,</div><div class="line">								   MS_NOATIME | MS_NODEV | MS_NODIRATIME, &quot;shortname=mixed,utf8&quot;);</div><div class="line">			if (result == 0) return 0;</div><div class="line"></div><div class="line">			LOGW(&quot;trying mount %s to ntfs\n&quot;, sec_dev);</div><div class="line">			result = mount(sec_dev, v-&gt;mount_point, &quot;ntfs&quot;,</div><div class="line">							   MS_NOATIME | MS_NODEV | MS_NODIRATIME, &quot;&quot;);</div><div class="line">			if (result == 0) return 0;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">        LOGE(&quot;failed to mount %s (%s)\n&quot;, v-&gt;mount_point, strerror(errno));</div><div class="line">        return -1;</div><div class="line">    &#125;else if (strcmp(v-&gt;fs_type, &quot;ntfs&quot;) == 0) &#123;</div><div class="line">		LOGW(&quot;trying mount %s to ntfs\n&quot;, v-&gt;blk_device);</div><div class="line">		result = mount(v-&gt;blk_device, v-&gt;mount_point, &quot;ntfs&quot;,</div><div class="line">						   MS_NOATIME | MS_NODEV | MS_NODIRATIME, &quot;&quot;);</div><div class="line">		if (result == 0) return 0;</div><div class="line"></div><div class="line">        LOGE(&quot;failed to mount %s (%s)\n&quot;, v-&gt;mount_point, strerror(errno));</div><div class="line">        return -1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    LOGE(&quot;unknown fs_type \&quot;%s\&quot; for %s\n&quot;, v-&gt;fs_type, v-&gt;mount_point);</div><div class="line">    return -1;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="界面定制"><a href="#界面定制" class="headerlink" title="界面定制"></a>界面定制</h2><h3 id="实现Recovery-UI"><a href="#实现Recovery-UI" class="headerlink" title="实现Recovery UI"></a>实现Recovery UI</h3><p>在自己的设备目录下：device/vendor/recovery/recovery_ui.cpp</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#include &lt;linux/input.h&gt;</div><div class="line">#include &lt;sys/stat.h&gt;</div><div class="line">#include &lt;errno.h&gt;</div><div class="line">#include &lt;string.h&gt;</div><div class="line"></div><div class="line">#include &quot;common.h&quot;</div><div class="line">#include &quot;device.h&quot;</div><div class="line">#include &quot;screen_ui.h&quot;</div></pre></td></tr></table></figure>
<h3 id="实现头部显示和列表项"><a href="#实现头部显示和列表项" class="headerlink" title="实现头部显示和列表项"></a>实现头部显示和列表项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">const char* HEADERS[] = &#123; &quot;Volume up/down to move highlight;&quot;,</div><div class="line">                         &quot;power button to select.&quot;,</div><div class="line">                         &quot;&quot;,</div><div class="line">                         NULL &#125;;</div><div class="line"></div><div class="line">const char* ITEMS[] =&#123; &quot;reboot system now&quot;,</div><div class="line">                       //&quot;apply update from ADB&quot;,</div><div class="line">                       &quot;apply update from external storage&quot;,</div><div class="line">                       &quot;update rkimage from external storage&quot;,</div><div class="line">                       &quot;apply update from cache&quot;,</div><div class="line">                       &quot;wipe data/factory reset&quot;,</div><div class="line">                       &quot;wipe cache partition&quot;,</div><div class="line">                       &quot;recovery system from backup&quot;,</div><div class="line">                       NULL &#125;;</div></pre></td></tr></table></figure>
<h3 id="实现ScreenRecoveryUI"><a href="#实现ScreenRecoveryUI" class="headerlink" title="实现ScreenRecoveryUI"></a>实现ScreenRecoveryUI</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">class DeviceUI : public ScreenRecoveryUI &#123;</div><div class="line">  public:</div><div class="line">	DeviceUI () :</div><div class="line">        consecutive_power_keys(0) &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">	//实现自己的识别key类型的功能，可以为不同的输入设备适配recovery功能</div><div class="line">    virtual KeyAction CheckKey(int key) &#123;</div><div class="line">        if (IsKeyPressed(KEY_POWER) &amp;&amp; key == KEY_VOLUMEUP) &#123;</div><div class="line">            return TOGGLE;</div><div class="line">        &#125;</div><div class="line">        if (key == KEY_POWER) &#123;</div><div class="line">            ++consecutive_power_keys;</div><div class="line">            if (consecutive_power_keys &gt;= 7) &#123;</div><div class="line">                return REBOOT;</div><div class="line">            &#125;</div><div class="line">        &#125; else &#123;</div><div class="line">            consecutive_power_keys = 0;</div><div class="line">        &#125;</div><div class="line">        return ENQUEUE;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  private:</div><div class="line">    int consecutive_power_keys;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="实现设备类"><a href="#实现设备类" class="headerlink" title="实现设备类"></a>实现设备类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">class MyDevice : public Device &#123;</div><div class="line">  public:</div><div class="line">	RkDevice() :</div><div class="line">        ui(new DeviceUI ) &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    RecoveryUI* GetUI() &#123; return ui; &#125;</div><div class="line"></div><div class="line">    int HandleMenuKey(int key_code, int visible) &#123;</div><div class="line">        if (visible) &#123;</div><div class="line">            switch (key_code) &#123;</div><div class="line">              case KEY_DOWN:</div><div class="line">              case KEY_VOLUMEDOWN:</div><div class="line">                return kHighlightDown;</div><div class="line"></div><div class="line">              case KEY_UP:</div><div class="line">              case KEY_VOLUMEUP:</div><div class="line">                return kHighlightUp;</div><div class="line"></div><div class="line">              case KEY_ENTER:</div><div class="line">              case KEY_POWER:</div><div class="line">                return kInvokeItem;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return kNoAction;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    BuiltinAction InvokeMenuItem(int menu_position) &#123;</div><div class="line">        switch (menu_position) &#123;</div><div class="line">          case 0: return REBOOT;</div><div class="line">          //case 1: return APPLY_ADB_SIDELOAD;</div><div class="line">          case 1: return APPLY_EXT;</div><div class="line">          case 2: return APPLY_INT_RKIMG;</div><div class="line">          case 3: return APPLY_CACHE;</div><div class="line">          case 4: return WIPE_DATA;</div><div class="line">          case 5: return WIPE_CACHE;</div><div class="line">          case 6: return RECOVER_SYSTEM;</div><div class="line">          default: return NO_ACTION;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    const char* const* GetMenuHeaders() &#123; return HEADERS; &#125;</div><div class="line">    const char* const* GetMenuItems() &#123; return ITEMS; &#125;</div><div class="line"></div><div class="line">  private:</div><div class="line">    RecoveryUI* ui;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//创建自己实现的设备</div><div class="line">Device* make_device() &#123;</div><div class="line">    return new MyDevice ;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="添加编译实现"><a href="#添加编译实现" class="headerlink" title="添加编译实现"></a>添加编译实现</h3><p>主要是覆盖TARGET_RECOVERY_UI_LIB，输出到/out/…./recovery/root目录下：</p>
<p>Android.mk<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">LOCAL_PATH := $(call my-dir)</div><div class="line">include $(CLEAR_VARS)</div><div class="line"></div><div class="line">LOCAL_MODULE_TAGS := eng</div><div class="line">LOCAL_C_INCLUDES += bootable/recovery</div><div class="line">LOCAL_SRC_FILES := recovery_ui.cpp</div><div class="line"></div><div class="line"># should match TARGET_RECOVERY_UI_LIB set in BoardConfig.mk</div><div class="line">LOCAL_MODULE := librecovery_ui_$(TARGET_PRODUCT)</div><div class="line"></div><div class="line">include $(BUILD_STATIC_LIBRARY)</div></pre></td></tr></table></figure></p>
<h2 id="recovery-二次开发"><a href="#recovery-二次开发" class="headerlink" title="recovery 二次开发"></a>recovery 二次开发</h2><h3 id="代码结构："><a href="#代码结构：" class="headerlink" title="代码结构："></a>代码结构：</h3><ol>
<li><p>bootable/recovery<br>Recovery主程序代码，其中recovery.cpp是入口，rkimage.cpp处理update.img升级流程，updater/install.c处理ota update.zip包升级流程。</p>
</li>
<li><p>build/tools/releasetools/<br>Ota升级包编译的python脚本，控制完整包与差异包的生成。</p>
</li>
<li><p>build/tools/drmsigntool/<br>如果开启drm，生成ota包时对boot.img进行签名，使用build/target/product/security/private.key，<br>保证进行ota升级后drm功能还能正常使用。</p>
</li>
<li><p>build/tools/mkparameter/<br>编译ota包时打包可升级的parameter的工具。</p>
</li>
<li><p>build/tools/remkloader/<br>编译ota包时打包可升级的loader的工具。</p>
</li>
<li><p>build/target/product/security/<br>编译ota包时签名使用的密钥</p>
</li>
<li><p>device/rockchip/rksdk/recovery/<br>Recovery菜单及按键定制</p>
</li>
<li><p>device/rockchip/rksdk/loader/<br>将需要升级的loader放在该目录下，可以打包到ota升级包中。</p>
</li>
<li><p>device/rockchip/rksdk/parameter/<br>将需要升级的parameter放在该目录下，可以打包到ota升级包中。</p>
</li>
<li><p>out/target/product/rk3188/obj/PACKAGING/target_files_intermediates/<br>Ota升级包编译生成的素材包，要做差异包必须保存该素材包。</p>
</li>
</ol>
<h3 id="板级配置"><a href="#板级配置" class="headerlink" title="板级配置"></a>板级配置</h3><blockquote>
<p>Recovery 一些宏配置开关在device/rockchip/rk30sdk/BoardConfig.mk</p>
</blockquote>
<ol>
<li><p>BOARD_HAS_FLIPPED_SCREEN := true</p>
<blockquote>
<p>针对lcd装反的情况可以强制recovery ui旋转180°</p>
</blockquote>
</li>
<li><p>TARGET_RECOVERY_UI_LIB ?= librecovery_ui_rk30sdk</p>
<blockquote>
<p>自定义recovery菜单与按键实现。</p>
</blockquote>
</li>
<li><p>TARGET_USERIMAGES_USE_EXT4 ?= true</p>
<blockquote>
<p>Recovery支持ext4 文件系统</p>
</blockquote>
</li>
<li><p>RECOVERY_UPDATEIMG_RSA_CHECK ?= false</p>
<blockquote>
<p>Update.img在升级时进行drm签名校验，防止第三方非法固件升级。Update.img必须使用secureboot工具签名，并勾选sign check复选框。</p>
</blockquote>
</li>
<li><p>RECOVERY_BOARD_ID ?= false</p>
<blockquote>
<p>一种根据烧录Boardid 串号实现一种固件支持不同硬件不同国家定制的one image方案，该方案支持google 的ota 完整升级和差异升级。</p>
</blockquote>
</li>
</ol>
<h2 id="脚本文件命令以及解析"><a href="#脚本文件命令以及解析" class="headerlink" title="脚本文件命令以及解析"></a>脚本文件命令以及解析</h2><p>升级脚本文件解析,</p>
<h3 id="try-update-binary"><a href="#try-update-binary" class="headerlink" title="try_update_binary"></a>try_update_binary</h3><p>主要命令有<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">progress &lt;frac&gt; &lt;secs&gt;</div><div class="line">set_progress &lt;frac&gt;</div><div class="line">firmware &lt;<span class="string">"hboot"</span>|<span class="string">"radio"</span>&gt; &lt;filename&gt;</div><div class="line">ui_print &lt;<span class="built_in">string</span>&gt;</div><div class="line">wipe_cache</div><div class="line">clear_display</div><div class="line">enable_reboot</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      Android Recovery 源码解析和界面定制 recovery二次开发
    
    </summary>
    
      <category term="android" scheme="https://austinxishou.github.io/categories/android/"/>
    
    
      <category term="android" scheme="https://austinxishou.github.io/tags/android/"/>
    
      <category term="Recovery" scheme="https://austinxishou.github.io/tags/Recovery/"/>
    
  </entry>
  
</feed>
